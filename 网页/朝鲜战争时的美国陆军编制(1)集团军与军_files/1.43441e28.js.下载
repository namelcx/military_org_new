(window.HK3=window.HK3||[]).push([[1],{"015f":function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isObject:function(t,e){return e?"object"===this.type(t):t&&"object"===(void 0===t?"undefined":i(t))},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},trim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},encode:function(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")},formatParams:function(t){var e="",n=!0,i=this;return this.isObject(t)?(function t(o,a){var r=i.encode,c=i.type(o);if("array"==c)o.forEach((function(e,n){i.isObject(e)||(n=""),t(e,a+"%5B"+n+"%5D")}));else if("object"==c)for(var s in o)t(o[s],a?a+"%5B"+r(s)+"%5D":r(s));else n||(e+="&"),n=!1,e+=a+"="+r(o)}(t,""),e):t},merge:function(t,e){for(var n in e)t.hasOwnProperty(n)?this.isObject(e[n],1)&&this.isObject(t[n],1)&&this.merge(t[n],e[n]):t[n]=e[n];return t}}},,function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a="undefined"!=typeof document,r=function(){function t(e){function n(t){function e(){t.p=n=i=null}var n=void 0,i=void 0;o.merge(t,{lock:function(){n||(t.p=new Promise((function(t,e){n=t,i=e})))},unlock:function(){n&&(n(),e())},clear:function(){i&&(i("cancel"),e())}})}(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.engine=e||XMLHttpRequest,this.default=this;var i=this.interceptors={response:{use:function(t,e){this.handler=t,this.onerror=e}},request:{use:function(t){this.handler=t}}},a=i.request;n(i.response),n(a),this.config={method:"GET",baseURL:"",headers:{},timeout:0,params:{},parseJson:!0,withCredentials:!1}}return i(t,[{key:"request",value:function(t,e,n){var i=this,r=new this.engine,c="Content-Type",s=c.toLowerCase(),l=this.interceptors,d=l.request,u=l.response,p=d.handler,h=new Promise((function(l,h){function f(t){return t&&t.then&&t.catch}function m(t,e){t?t.then((function(){e()})):e()}function g(n){function i(t,e,i){m(u.p,(function(){if(t){i&&(e.request=n);var o=t.call(u,e,Promise);e=void 0===o?e:o}f(e)||(e=Promise[0===i?"resolve":"reject"](e)),e.then((function(t){l(t)})).catch((function(t){h(t)}))}))}function d(t){t.engine=r,i(u.onerror,t,-1)}function p(t,e){this.message=t,this.status=e}e=n.body,t=o.trim(n.url);var g=o.trim(n.baseURL||"");if(t||!a||g||(t=location.href),0!==t.indexOf("http")){var x="/"===t[0];if(!g&&a){var b=location.pathname.split("/");b.pop(),g=location.protocol+"//"+location.host+(x?"":b.join("/"))}if("/"!==g[g.length-1]&&(g+="/"),t=g+(x?t.substr(1):t),a){var v=document.createElement("a");v.href=t,t=v.href}}var y=o.trim(n.responseType||""),E=-1!==["GET","HEAD","DELETE","OPTION"].indexOf(n.method),B=o.type(e),k=n.params||{};E&&"object"===B&&(k=o.merge(e,k));var w=[];(k=o.formatParams(k))&&w.push(k),E&&e&&"string"===B&&w.push(e),w.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+w.join("&")),r.open(n.method,t);try{r.withCredentials=!!n.withCredentials,r.timeout=n.timeout||0,"stream"!==y&&(r.responseType=y)}catch(t){}var D=n.headers[c]||n.headers[s],C="application/x-www-form-urlencoded";for(var A in o.trim((D||"").toLowerCase())===C?e=o.formatParams(e):o.isFormData(e)||-1===["object","array"].indexOf(o.type(e))||(C="application/json;charset=utf-8",e=JSON.stringify(e)),D||E||(n.headers[c]=C),n.headers)if(A===c&&o.isFormData(e))delete n.headers[A];else try{r.setRequestHeader(A,n.headers[A])}catch(t){}r.onload=function(){try{var t=r.response||r.responseText;t&&n.parseJson&&-1!==(r.getResponseHeader(c)||"").indexOf("json")&&!o.isObject(t)&&(t=JSON.parse(t));var e=r.responseHeaders;if(!e){e={};var a=(r.getAllResponseHeaders()||"").split("\r\n");a.pop(),a.forEach((function(t){if(t){var n=t.split(":")[0];e[n]=r.getResponseHeader(n)}}))}var s=r.status,l=r.statusText,h={data:t,headers:e,status:s,statusText:l};if(o.merge(h,r._response),s>=200&&s<300||304===s)h.engine=r,h.request=n,i(u.handler,h,0);else{var f=new p(l,s);f.response=h,d(f)}}catch(f){d(new p(f.msg,r.status))}},r.onerror=function(t){d(new p(t.msg||"Network Error",0))},r.ontimeout=function(){d(new p("timeout [ "+r.timeout+"ms ]",1))},r._options=n,setTimeout((function(){r.send(E?null:e)}),0)}o.isObject(t)&&(t=(n=t).url),(n=n||{}).headers=n.headers||{},m(d.p,(function(){o.merge(n,JSON.parse(JSON.stringify(i.config)));var a=n.headers;a[c]=a[c]||a[s]||"",delete a[s],n.body=e||n.body,t=o.trim(t||""),n.method=n.method.toUpperCase(),n.url=t;var r=n;p&&(r=p.call(d,n,Promise)||n),f(r)||(r=Promise.resolve(r)),r.then((function(t){t===n?g(t):l(t)}),(function(t){h(t)}))}))}));return h.engine=r,h}},{key:"all",value:function(t){return Promise.all(t)}},{key:"spread",value:function(t){return function(e){return t.apply(null,e)}}}]),t}();r.default=r,["get","post","put","patch","head","delete"].forEach((function(t){r.prototype[t]=function(e,n,i){return this.request(e,n,o.merge({method:t},i))}})),["lock","unlock","clear"].forEach((function(t){r.prototype[t]=function(){this.interceptors.request[t]()}})),t.exports=r}])},b6ec:function(t,e,n){(function(t){!function(e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,c=t[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var y=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()};function E(t,e){return y(t)===e.toLowerCase()}function B(t){return null==t}function k(t){return!!E(t,"Object")&&(null===Object.getPrototypeOf(t)||Object===t.constructor)}function w(t){return E(t,"Function")}function D(t){return E(t,"String")}function C(t){return E(t,"Array")}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return B(t)?e:D(t)?t:String(t)}var S={name:"",version:""},j={opera:/Opera\/([\d.]+)/,firefox:/Firefox\/([\d.]+)/,ie:/MSIE\s([\d.]+)/,ie11:/Trident\/[\d](?=[^\?]+).*rv:([0-9.]+)/,edge:/Edge\/([\d.]+)/,chrome:/Chrome\/([\d.]+)/,safari:/Safari\/([\d.]+)/};function T(t){return j.opera.test(t)?"Opera":j.firefox.test(t)?"Firefox":j.ie.test(t)||j.ie11.test(t)?"IE":j.edge.test(t)?"Edge":j.chrome.test(t)?"Chrome":j.safari.test(t)?"Safari":"other"}var I=navigator.userAgent||"";S.name=T(I),S.version=function(t,e){var n="";switch(e=e||T(t)){case"Opera":case"Firefox":case"Edge":case"Chrome":case"Safari":var i=j[e.toLocaleLowerCase()].exec(t);n=i?i[1]:"";break;case"IE":var o=j.ie.exec(t)||j.ie11.exec(t);n=o?o[1]:""}return n}(I,S.name);var _={isDev:!0,isLogin:!1,userInfo:{},appid:"",threadId:"",commentCount:0,winHeight:window.innerHeight||document.documentElement.clientHeight,passStaticPage:"",isHigherBrowser:function(t){var e=S.name.toLocaleLowerCase();if(t.hasOwnProperty(e)){var n=t[e];return function(t,e){t=A(t,""),e=A(e,"");for(var n=t.split("."),i=e.split("."),o=0,a=Math.max(n.length,i.length);o<a;o++){if(n[o]&&!i[o]&&parseInt(n[o],10)>0||parseInt(n[o],10)>parseInt(i[o],10))return 1;if(i[o]&&!n[o]&&parseInt(i[o],10)>0||parseInt(n[o],10)<parseInt(i[o],10))return-1}return 0}(S.version,n)>-1}return!0}({ie:"11"}),hideToast:!1},F={thread_id:"",reply_id:"",start:0,num:20,appid:"",order:"12",inner_order:"9",use_list:"1",callback:"?"},O="https://ext.baidu.com",P={LIST1:"".concat(O,"/api/comment/v2/comment/list"),LIST2:"".concat(O,"/api/comment/v2/comment/detail"),UPDOWN:"".concat(O,"/api/comment/v1/comment/updown"),DELETE:"".concat(O,"/api/comment/v1/comment/delreply"),REPORT:"".concat(O,"/api/comment/v1/comment/report"),ADDREPLY:"".concat(O,"/api/comment/v1/comment/addreply")},L="正在加载...",R="加载失败，点击重新加载",N="查看更多评论",H="没有更多啦",z="网络不给力，请稍后重试",M=[{id:"4",text:"反动违法"},{id:"1",text:"色情低俗"},{id:"6",text:"谩骂攻击"},{id:"3",text:"营销广告"},{id:"9",text:"其他"}],U=function(t){return"".concat("https://author.baidu.com/home","?context=%7B%22uk%22%3A%22").concat(t,"%22%7D")},K={202:"参数错误，发送失败",701:"手速太快了，休息一下再试吧",872:"此评论暂无法回复",802:"发送失败，此内容暂不支持评论",880:"发表失败",890:"每天可发表5次图片评论",838:"由于对方设置，你无法进行该操作"},q=function(t,e,n){return new TypeError("Expected `"+t+"` to be of type `"+e+"`, got `"+i(n)+"`")},$=function(){function t(){o(this,t),this._events={}}return r(t,[{key:"on",value:function(t,e,n){if(!D(t))throw q("name","string",t);if(!w(e))throw q("callback","function",e);var i=this._events;return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this}},{key:"once",value:function(t,e,n){var i=this;function o(){i.off(t,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];e.apply(n,r)}return o._=e,this.on(t,o,n)}},{key:"emit",value:function(t){if(!D(t))throw q("name","string",t);for(var e=(this._events[t]||[]).slice(),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0,r=e.length;a<r;a++){var c=e[a],s=c.fn,l=c.ctx,d=void 0===l?null:l;s.apply(d,i)}return this}},{key:"off",value:function(t,e){var n=this._events,i=n[t];if(i&&i.length)if(void 0===e)delete n[t];else if(w(e)){for(var o=[],a=0,r=i.length;a<r;a++){var c=i[a].fn;c!==e&&c._!==e&&o.push(i[a])}o.length?n[t]=o:delete n[t]}return this}}]),t}(),V=function(){return new $},W=0,J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return W++,(Date.now().toString(16)+W).slice(-1*t)},Y="object"===("undefined"==typeof window?"undefined":i(window))?window:t,Q=function(t){if("function"==typeof t){var e="_xfunc_".concat(J());return Y[e]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(Y,n)},e}return t},G=encodeURIComponent,X=function(t){return G(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))};function Z(t){return t.map((function(t){switch(y(t)){case"string":return t;case"function":return Q(t);default:return t}}))}var tt=function(){};function et(t){return E(t,"function")}function nt(t){var e=t.url,n=t.before,o=t.success,a=t.error,r=t.timeout,c=void 0===r?2e4:r,s=t.async,l=t.data,d=t.jsonpCallback,u=t.jsonpCallbackName;"object"===i(l)&&(l=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(D(t))return t;var n=[];for(var i in t){var o=t[i];C(o)?o=JSON.stringify(Z(o)):B(o)?o="":k(o)?o=JSON.stringify(o):w(o)&&(o=Q(o)),n.push("".concat(i,"=").concat(e?X(o):o))}return n.join("&")}(l)),l&&(e+=(-1===e.indexOf("?")?"?":"&")+l),e=e.replace(/[&?]{1,2}/,"?");var p,h=(et(d)?d():d)||"_boxjsonp"+J(),f=window[h];window[h]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];p=e},u?e+="&"+u+"="+h:/=\?/.test(e)&&(e=e.replace(/=\?/,"="+h)),function t(e,n,i){var o,a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=document,s=e.replace(/^(css|img)!/,""),l=!1,d=i.async,u=void 0===d||d,p=i.maxTries,h=void 0===p?1:p,f=i.timeout,m=void 0===f?2e4:f,g=i.before,x=void 0===g?null:g,b=x;"function"!=typeof b&&(b=tt),/(^css!|\.css$)/.test(e)?(l=!0,(o=c.createElement("link")).rel="stylesheet",o.href=s):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(o=c.createElement("img")).src=s:((o=c.createElement("script")).src=e,o.async=!!u);var v=function(c){var s;if(clearTimeout(a),s=c instanceof Error?"e":c.type[0],l&&"hideFocus"in o)try{o.sheet.cssText.length||(s="e")}catch(t){s="e"}if("e"===s&&(r+=1)<h)return t(e,n,i,r);o.onload=o.onerror=o.onbeforeload=null,o=null,n("e"===s?c||"error":null,e)};if(o.onload=o.onerror=v,!1!==b(e,o)){var y=c.head||c.getElementsByTagName("script")[0];y.appendChild(o),m>0&&(a=setTimeout((function(){v(new Error("timeout"))}),m))}}(e,(function(t,e){t?a(t,e):o(p&&p[0]),window[h]=f,p&&et(f)&&f(p[0]),f=p=void 0}),{timeout:c,async:s,before:n})}var it=function(t,e,n){if("object"===i(t)){var o,a,r=function(t){var e;return e=null==t?String(t):(e=Object.prototype.toString.call(t).toLowerCase()).substring(8,e.length-1)}(t);if(n=n||t,"array"===r||"arguments"===r||"nodelist"===r){for(o=0,a=t.length;o<a;o++)if(!1===e.call(n,t[o],o,t))return}else for(o in t)if(t.hasOwnProperty(o)&&!1===e.call(n,t[o],o,t))return}},ot=/^\.([\w-]+)$/,at=/^#([\w-]*)$/,rt=/^[\w-]+$/,ct={mouseenter:"mouseover",mouseleave:"mouseout"},st={},lt=function(){return!0},dt=function(){return!1},ut=/^([A-Z]|layer[XY]$)/,pt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function ht(t,e,n,i){return function(t,e,n,i,o,a){var r=function(t){return t._bid||(t._bid=J())}(t),c=st[r]||(st[r]=[]);!function(t,e,n){t.split(/\s/).forEach((function(t){n(t,e)}))}(e,n,(function(e,n){var a=function(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}(e);a.fn=n,a.sel=i,a.e in ct&&(n=function(t){var e=t.relatedTarget;if(!e||e!==this&&!bt(this,e))return a.fn.apply(this,arguments)}),a.del=o&&o(n);var r=a.del||n;a.proxy=function(e){var n=r.apply(t,[e].concat(e.data));return!1===n&&(e.preventDefault(),e.stopPropagation()),n},a.i=c.length,c.push(a),"addEventListener"in t&&t.addEventListener(function(t){return ct[t]||t}(a.e),a.proxy,function(t,e){return t.del&&("focus"===t.e||"blur"===t.e)||!1}(a))}))}(t,n,i,e,(function(n){return function(i){var o,a=mt(i.target,e,t);if(a){(o=ft(i)).currentTarget=a,o.liveFired=t;for(var r=arguments.length,c=new Array(r>1?r-1:0),s=1;s<r;s++)c[s-1]=arguments[s];return n.apply(a,[o].concat(c))}}}))}function ft(t){var e,n={originalEvent:t};for(e in t)ut.test(e)||void 0===t[e]||(n[e]=t[e]);return it(pt,(function(e,i){n[i]=function(){return this[e]=lt,t[i].apply(t,arguments)},n[e]=dt})),n}function mt(t,e,n){for(;t&&!xt(t,e);)t=t!==n&&!gt(t)&&t.parentNode;return t}function gt(t){return null!=t&&t.nodeType===t.DOCUMENT_NODE}function xt(t,e){if(!t||1!==t.nodeType)return!1;var n,i=t.webkitMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var o=t.parentNode,a=!o,r=document.createElement("div");return a&&(o=r).appendChild(t),n=~function(t,e){var n;return gt(t)&&at.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:Array.prototype.slice.call(ot.test(e)?t.getElementsByClassName(RegExp.$1):rt.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))}(o,e).indexOf(t),a&&r.removeChild(t),n}function bt(t,e){return t!==e&&t.contains(e)}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}('.x-avatar{position:relative;display:block;width:48px;height:48px}.x-avatar.is-small{width:39px;height:39px}.x-avatar-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-avatar-img{position:relative;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;border-radius:50%}.x-avatar-img:after{content:"";position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;width:300%;height:300%;border:3px solid rgba(0,0,0,.1);border-radius:100%;-webkit-transform:scale(.333333);transform:scale(.333333);-webkit-transform-origin:0 0;transform-origin:0 0}.x-avatar-vip{position:absolute;z-index:1;right:0;bottom:0;width:16.5px;height:16.5px;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.x-avatar .is-small-vip{width:13.2px;height:13.2px}.x-avatar .vip-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-1.png)}.x-avatar .vip-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-2.png)}.x-avatar .vip-3{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-3.png)}.x-avatar .vip-10{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-10.png)}');var vt=function(){function t(e){o(this,t),this.container=e.container,this.prefixCls="x-avatar",this.src=e.src,this.vip=e.vip,this.href=e.href,this.isSmall=e.isSmall,this.render()}return r(t,[{key:"render",value:function(){var t=document.createElement(this.href?"a":"div");t.classList.add("x-avatar",this.isSmall?"is-small":"x-avatar"),t.href=this.href;var e='\n            <div class="'.concat("x-avatar",'-placeholder"></div>\n            <div class="').concat("x-avatar",'-img" style="').concat(this.imgStyle(),'"></div>\n            ').concat(+this.vip?'<div class="'.concat("x-avatar","-vip vip-").concat(this.vip," ").concat(this.isSmall?"is-small-vip":"",'"></div>'):"","\n        ");t.innerHTML=e,this.container.appendChild(t)}},{key:"imgStyle",value:function(){return this.src?"background-image: url(".concat(this.src,")"):""}},{key:"updateSrc",value:function(t){this.src=t.src,this.container.querySelector(".".concat("x-avatar","-img")).style.backgroundImage="url(".concat(this.src,")")}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".user-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-family:PingFangSC-Regular}.user-bar-uname{font-family:PingFangSC-Semibold;font-size:13px;color:#222}.user-bar-lz{margin-left:4px;margin-right:-7px;padding:2px 2.67px;-webkit-transform:scale(.75);transform:scale(.75);-webkit-transform-origin:left center;transform-origin:left center;font-size:12px;line-height:1;color:#4e6ef2;border:1px solid rgba(78,110,242,.5);border-radius:3.25px;display:inline-block;font-family:initial;font-weight:400}.user-bar-dc{width:13px;height:13px;margin-left:4px;background-size:cover;background-position:50%;background-repeat:no-repeat}.user-bar-verified{padding-left:4px;font-size:13px;color:#626675;display:inline-block;max-width:200px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}");var yt=function(){function t(e){o(this,t),this.uname=e.uname,this.isAuthor=!!+e.isAuthor,this.verified=e.verified,this.decorations=e.decorations||[],this.prefixCls="user-bar"}return r(t,[{key:"makeTpl",value:function(){var t=this.decorations;return'\n            <div class="'.concat("user-bar",'">\n                <h5 class="').concat("user-bar",'-uname">').concat(this.uname).concat(this.isAuthor?'<span class="'.concat("user-bar",'-lz">作者</span>'):"","</h5>\n                ").concat(t.length?t.map((function(t){return t.icon?'<span class="'.concat("user-bar",'-dc" style="background-image:url(').concat(t.icon,')"></span>'):""})).join(""):"","\n                ").concat(this.verified?'<span class="'.concat("user-bar",'-verified">').concat(this.verified,"</span>"):"","\n            </div>\n        ")}},{key:"bindEvent",value:function(t){}}]),t}(),Et=function(t,e,n){if("object"===i(t)){var o,a,r=function(t){var e;return e=null==t?String(t):(e=Object.prototype.toString.call(t).toLowerCase()).substring(8,e.length-1)}(t);if(n=n||t,"array"===r||"arguments"===r||"nodelist"===r){for(o=0,a=t.length;o<a;o++)if(!1===e.call(n,t[o],o,t))return}else for(o in t)if(t.hasOwnProperty(o)&&!1===e.call(n,t[o],o,t))return}},Bt=0,kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Bt++,(Date.now().toString(16)+Bt).slice(-1*t)},wt=/^\.([\w-]+)$/,Dt=/^#([\w-]*)$/,Ct=/^[\w-]+$/,At={mouseenter:"mouseover",mouseleave:"mouseout"},St={},jt=function(){return!0},Tt=function(){return!1},It=/^([A-Z]|layer[XY]$)/,_t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function Ft(t,e,n,i){return function(t,e,n,i,o,a){var r=Pt(t),c=St[r]||(St[r]=[]);zt(e,n,(function(e,n){var a=Rt(e);a.fn=n,a.sel=i,a.e in At&&(n=function(t){var e=t.relatedTarget;if(!e||e!==this&&!qt(this,e))return a.fn.apply(this,arguments)}),a.del=o&&o(n);var r=a.del||n;a.proxy=function(e){var n=r.apply(t,[e].concat(e.data));return!1===n&&(e.preventDefault(),e.stopPropagation()),n},a.i=c.length,c.push(a),"addEventListener"in t&&t.addEventListener(Nt(a.e),a.proxy,Ht(a,void 0))}))}(t,n,i,e,(function(n){return function(i){var o,a=Mt(i.target,e,t);if(a){(o=Lt(i)).currentTarget=a,o.liveFired=t;for(var r=arguments.length,c=new Array(r>1?r-1:0),s=1;s<r;s++)c[s-1]=arguments[s];return n.apply(a,[o].concat(c))}}}))}function Ot(t,e,n,i){return function(t,e,n,i,o){var a=Pt(t);zt(e||"",n,(function(e,n){(function(t,e,n,i){var o,a,r=Rt(e);return r.ns&&(a=r.ns,o=new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")),(St[Pt(t)]||[]).filter((function(t){return t&&(!r.e||t.e===r.e)&&(!r.ns||o.test(t.ns))&&(!n||Pt(t.fn)===Pt(n))&&(!i||t.sel===i)}))})(t,e,n,i).forEach((function(e){delete St[a][e.i],"removeEventListener"in t&&t.removeEventListener(Nt(e.e),e.proxy,Ht(e,void 0))}))}))}(t,n,i,e)}function Pt(t){return t._bid||(t._bid=kt())}function Lt(t){var e,n={originalEvent:t};for(e in t)It.test(e)||void 0===t[e]||(n[e]=t[e]);return Et(_t,(function(e,i){n[i]=function(){return this[e]=jt,t[i].apply(t,arguments)},n[e]=Tt})),n}function Rt(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function Nt(t){return At[t]||t}function Ht(t,e){return t.del&&("focus"===t.e||"blur"===t.e)||!!e}function zt(t,e,n){t.split(/\s/).forEach((function(t){n(t,e)}))}function Mt(t,e,n){for(;t&&!Kt(t,e);)t=t!==n&&!Ut(t)&&t.parentNode;return t}function Ut(t){return null!=t&&t.nodeType===t.DOCUMENT_NODE}function Kt(t,e){if(!t||1!==t.nodeType)return!1;var n,i=t.webkitMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var o=t.parentNode,a=!o,r=document.createElement("div");return a&&(o=r).appendChild(t),n=~function(t,e){var n;return Ut(t)&&Dt.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:Array.prototype.slice.call(wt.test(e)?t.getElementsByClassName(RegExp.$1):Ct.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))}(o,e).indexOf(t),a&&r.removeChild(t),n}function qt(t,e){return t!==e&&t.contains(e)}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-interact-img-view{position:fixed;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:100;background:rgba(25,18,25,.9);cursor:-webkit-zoom-out;cursor:zoom-out}");var $t="x-interact-img-view",Vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.list=e.list,this.containerId=e.containerId?"#"+e.containerId:"",this.container=this.containerId&&document.querySelector(this.containerId)||document.body,this.winHeight=window.innerHeight||document.documentElement.clientHeight,this.winWidth=window.innerWidth||document.documentElement.clientWidth}return r(t,[{key:"render",value:function(){var t=this.makeTpl(this.list);this.container.insertAdjacentHTML("beforeend",t),this.bindEvent()}},{key:"makeTpl",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e[n]||{},o=i||{},a=o.url,r=o.width,c=o.height;r>c?(r=Math.min(r,this.winWidth)-100,t="width: ".concat(r,"px")):(c=Math.min(c,this.winHeight)-100,t="height: ".concat(c,"px"));var s='\n            <div class="'.concat($t,'">\n                <img src="').concat(a,'" style="').concat(t,'"/>\n            </div>\n        ');return s}},{key:"destory",value:function(){Ot(this.container,".".concat($t),"click");var t=this.container.querySelector(".".concat($t));t&&(t.outerHTML="")}},{key:"bindEvent",value:function(){var t=this;Ft(this.container,".".concat($t),"click",(function(){t.destory()}))}}]),t}(),Wt="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"",Jt={version:"1",imgpath:"https://baidubox-emoji.cdn.bcebos.com/imgs/",packages:[{id:"1",name:"emoji",package_icon:"package_01.png",version:"2.0.2",blacklist:[],emoticons:[{id:"001001",text:"[微笑]",icon:"%5B%E5%BE%AE%E7%AC%91%5D.png"},{id:"001002",text:"[开心]",icon:"%5B%E5%BC%80%E5%BF%83%5D.png"},{id:"001003",text:"[期待]",icon:"%5B%E6%9C%9F%E5%BE%85%5D.png"},{id:"001004",text:"[大笑]",icon:"%5B%E5%A4%A7%E7%AC%91%5D.png"},{id:"001005",text:"[鼓掌]",icon:"%5B%E9%BC%93%E6%8E%8C%5D.png"},{id:"001006",text:"[悠闲]",icon:"%5B%E6%82%A0%E9%97%B2%5D.png"},{id:"001007",text:"[笑哭]",icon:"%5B%E7%AC%91%E5%93%AD%5D.png"},{id:"001008",text:"[不要啊]",icon:"%5B%E4%B8%8D%E8%A6%81%E5%95%8A%5D.png"},{id:"001009",text:"[啊]",icon:"%5B%E5%95%8A%5D.png"},{id:"001010",text:"[哟]",icon:"%5B%E5%93%9F%5D.png"},{id:"001011",text:"[汗]",icon:"%5B%E6%B1%97%5D.png"},{id:"001012",text:"[抠鼻]",icon:"%5B%E6%8A%A0%E9%BC%BB%5D.png"},{id:"001013",text:"[哼]",icon:"%5B%E5%93%BC%5D.png"},{id:"001014",text:"[发怒]",icon:"%5B%E5%8F%91%E6%80%92%5D.png"},{id:"001015",text:"[委屈]",icon:"%5B%E5%A7%94%E5%B1%88%5D.png"},{id:"001016",text:"[不高兴]",icon:"%5B%E4%B8%8D%E9%AB%98%E5%85%B4%5D.png"},{id:"001017",text:"[囧]",icon:"%5B%E5%9B%A7%5D.png"},{id:"001018",text:"[惊哭]",icon:"%5B%E6%83%8A%E5%93%AD%5D.png"},{id:"001019",text:"[大哭]",icon:"%5B%E5%A4%A7%E5%93%AD%5D.png"},{id:"001020",text:"[流泪]",icon:"%5B%E6%B5%81%E6%B3%AA%5D.png"},{id:"001021",text:"[害羞]",icon:"%5B%E5%AE%B3%E7%BE%9E%5D.png"},{id:"001022",text:"[亲亲]",icon:"%5B%E4%BA%B2%E4%BA%B2%5D.png"},{id:"001023",text:"[色]",icon:"%5B%E8%89%B2%5D.png"},{id:"001024",text:"[舔屏]",icon:"%5B%E8%88%94%E5%B1%8F%5D.png"},{id:"001025",text:"[得意]",icon:"%5B%E5%BE%97%E6%84%8F%5D.png"},{id:"001026",text:"[疑问]",icon:"%5B%E7%96%91%E9%97%AE%5D.png"},{id:"001027",text:"[晕]",icon:"%5B%E6%99%95%5D.png"},{id:"001028",text:"[大哈]",icon:"%5B%E5%A4%A7%E5%93%88%5D.png"},{id:"001029",text:"[二哈]",icon:"%5B%E4%BA%8C%E5%93%88%5D.png"},{id:"001030",text:"[三哈]",icon:"%5B%E4%B8%89%E5%93%88%5D.png"},{id:"001031",text:"[白眼]",icon:"%5B%E7%99%BD%E7%9C%BC%5D.png"},{id:"001032",text:"[阴险]",icon:"%5B%E9%98%B4%E9%99%A9%5D.png"},{id:"001033",text:"[你懂的]",icon:"%5B%E4%BD%A0%E6%87%82%E7%9A%84%5D.png"},{id:"001034",text:"[偷笑]",icon:"%5B%E5%81%B7%E7%AC%91%5D.png"},{id:"001035",text:"[睡觉]",hideInEmojiKeyboard:!0,icon:"%5B%E7%9D%A1%E8%A7%89%5D.png"},{id:"001036",text:"[哈欠]",icon:"%5B%E5%93%88%E6%AC%A0%5D.png"},{id:"001037",text:"[再见]",icon:"%5B%E5%86%8D%E8%A7%81%5D.png"},{id:"001038",text:"[鄙视]",icon:"%5B%E9%84%99%E8%A7%86%5D.png"},{id:"001039",text:"[抓狂]",icon:"%5B%E6%8A%93%E7%8B%82%5D.png"},{id:"001040",text:"[咒骂]",icon:"%5B%E5%92%92%E9%AA%82%5D.png"},{id:"001041",text:"[衰]",icon:"%5B%E8%A1%B0%5D.png"},{id:"001042",text:"[骷髅]",icon:"%5B%E9%AA%B7%E9%AB%85%5D.png"},{id:"001043",text:"[嘘]",icon:"%5B%E5%98%98%5D.png"},{id:"001044",text:"[闭嘴]",icon:"%5B%E9%97%AD%E5%98%B4%5D.png"},{id:"001045",text:"[呆]",icon:"%5B%E5%91%86%5D.png"},{id:"001046",text:"[什么鬼]",icon:"%5B%E4%BB%80%E4%B9%88%E9%AC%BC%5D.png"},{id:"001047",text:"[吐]",icon:"%5B%E5%90%90%5D.png"},{id:"001048",text:"[已阅]",icon:"%5B%E5%B7%B2%E9%98%85%5D.png"},{id:"001049",text:"[同上]",icon:"%5B%E5%90%8C%E4%B8%8A%5D.png"},{id:"001050",text:"[友军]",icon:"%5B%E5%8F%8B%E5%86%9B%5D.png"},{id:"001051",text:"[爱钱]",icon:"%5B%E7%88%B1%E9%92%B1%5D.png"},{id:"001053",text:"[国宝]",icon:"%5B%E5%9B%BD%E5%AE%9D%5D.png"},{id:"001054",text:"[羊驼]",icon:"%5B%E7%BE%8A%E9%A9%BC%5D.png"},{id:"001055",text:"[鲜花]",icon:"%5B%E9%B2%9C%E8%8A%B1%5D.png"},{id:"001056",text:"[中国加油]",hideInEmojiKeyboard:!0,icon:"%5B%E4%B8%AD%E5%9B%BD%E5%8A%A0%E6%B2%B9%5D.png"},{id:"001057",text:"[庆祝]",icon:"%5B%E5%BA%86%E7%A5%9D%5D.png"},{id:"001058",text:"[生日蛋糕]",icon:"%5B%E7%94%9F%E6%97%A5%E8%9B%8B%E7%B3%95%5D.png"},{id:"001059",text:"[MicDrop]",hideInEmojiKeyboard:!0,icon:"%5BMicDrop%5D.png"},{id:"001060",text:"[赞同]",icon:"%5B%E8%B5%9E%E5%90%8C%5D.png"},{id:"001061",text:"[药丸]",icon:"%5B%E8%8D%AF%E4%B8%B8%5D.png"},{id:"001062",text:"[蜡烛]",icon:"%5B%E8%9C%A1%E7%83%9B%5D.png"},{id:"001063",text:"[鸡蛋]",icon:"%5B%E9%B8%A1%E8%9B%8B%5D.png"},{id:"001064",text:"[浪]",hideInEmojiKeyboard:!0,icon:"%5B%E6%B5%AA%5D.png"},{id:"001065",text:"[打call]",icon:"%5B%E6%89%93call%5D.png"},{id:"001066",text:"[尬笑]",icon:"%5B%E5%B0%AC%E7%AC%91%5D.png"},{id:"001067",text:"[坏笑]",icon:"%5B%E5%9D%8F%E7%AC%91%5D.png"},{id:"001068",text:"[没眼看]",icon:"%5B%E6%B2%A1%E7%9C%BC%E7%9C%8B%5D.png"},{id:"001069",text:"[嘿哈]",icon:"%5B%E5%98%BF%E5%93%88%5D.png"},{id:"001070",text:"[前面的别走]",icon:"%5B%E5%89%8D%E9%9D%A2%E7%9A%84%E5%88%AB%E8%B5%B0%5D.png"},{id:"001071",text:"[滑稽]",icon:"%5B%E6%BB%91%E7%A8%BD%5D.png"},{id:"001072",text:"[捂脸]",icon:"%5B%E6%8D%82%E8%84%B8%5D.png"},{id:"001073",text:"[左捂脸]",icon:"%5B%E5%B7%A6%E6%8D%82%E8%84%B8%5D.png"},{id:"001074",text:"[666]",icon:"%5B666%5D.png"},{id:"001075",text:"[2018]",hideInEmojiKeyboard:!0,icon:"%5B2018%5D.png"},{id:"001076",text:"[福]",hideInEmojiKeyboard:!0,icon:"%5B%E7%A6%8F%5D.png"},{id:"001077",text:"[红包]",hideInEmojiKeyboard:!0,icon:"%5B%E7%BA%A2%E5%8C%85%5D.png"},{id:"001078",text:"[鞭炮]",icon:"%5B%E9%9E%AD%E7%82%AE%5D.png"},{id:"001079",text:"[财神]",icon:"%5B%E8%B4%A2%E7%A5%9E%5D.png"},{id:"001080",text:"[饺子]",hideInEmojiKeyboard:!0,icon:"%5B%E9%A5%BA%E5%AD%90%5D.png"},{id:"001081",text:"[车票]",hideInEmojiKeyboard:!0,icon:"%5B%E8%BD%A6%E7%A5%A8%5D.png"},{id:"001082",text:"[火车]",icon:"%5B%E7%81%AB%E8%BD%A6%5D.png"},{id:"001083",text:"[飞机]",icon:"%5B%E9%A3%9E%E6%9C%BA%5D.png"},{id:"001084",text:"[射门]",hideInEmojiKeyboard:!0,icon:"%5B%E5%B0%84%E9%97%A8%5D.png"},{id:"001085",text:"[红牌]",hideInEmojiKeyboard:!0,icon:"%5B%E7%BA%A2%E7%89%8C%5D.png"},{id:"001086",text:"[黄牌]",hideInEmojiKeyboard:!0,icon:"%5B%E9%BB%84%E7%89%8C%5D.png"},{id:"001087",text:"[哨子]",hideInEmojiKeyboard:!0,icon:"%5B%E5%93%A8%E5%AD%90%5D.png"},{id:"001088",text:"[比分]",hideInEmojiKeyboard:!0,icon:"%5B%E6%AF%94%E5%88%86%5D.png"},{id:"001089",text:"[啤酒]",hideInEmojiKeyboard:!0,icon:"%5B%E5%95%A4%E9%85%92%5D.png"},{id:"001090",text:"[足球]",hideInEmojiKeyboard:!0,icon:"%5B%E8%B6%B3%E7%90%83%5D.png"},{id:"001091",text:"[大力神杯]",hideInEmojiKeyboard:!0,icon:"%5B%E5%A4%A7%E5%8A%9B%E7%A5%9E%E6%9D%AF%5D.png"},{id:"001092",text:"[锦鲤]",hideInEmojiKeyboard:!0,icon:"%5B%E9%94%A6%E9%B2%A4%5D.png"},{id:"001095",text:"[双手鼓掌]",icon:"%5B%E5%8F%8C%E6%89%8B%E9%BC%93%E6%8E%8C%5D.png"},{id:"001096",text:"[火焰]",hideInEmojiKeyboard:!0,icon:"%5B%E7%81%AB%E7%84%B0%5D.png"},{id:"001097",text:"[祈福]",icon:"%5B%E7%A5%88%E7%A6%8F%5D.png"},{id:"001098",text:"[亲吻]",icon:"%5B%E4%BA%B2%E5%90%BB%5D.png"},{id:"001099",text:"[天使]",hideInEmojiKeyboard:!0,icon:"%5B%E5%A4%A9%E4%BD%BF%5D.png"},{id:"001100",text:"[樱花]",hideInEmojiKeyboard:!0,icon:"%5B%E6%A8%B1%E8%8A%B1%5D.png"},{id:"001101",text:"[加油]",icon:"%5B%E5%8A%A0%E6%B2%B9%5D.png"},{id:"001102",text:"[泡泡枪]",icon:"%5B%E6%B3%A1%E6%B3%A1%E6%9E%AA%5D.png"},{id:"001103",text:"[气球]",hideInEmojiKeyboard:!0,icon:"%5B%E6%B0%94%E7%90%83%5D.png"},{id:"001104",text:"[棒棒糖]",icon:"%5B%E6%A3%92%E6%A3%92%E7%B3%96%5D.png"},{id:"001105",text:"[小黄鸭]",icon:"%5B%E5%B0%8F%E9%BB%84%E9%B8%AD%5D.png"},{id:"001106",text:"[粽子]",hideInEmojiKeyboard:!0,icon:"%5B%E7%B2%BD%E5%AD%90%5D.png"},{id:"001107",text:"[70周年]",hideInEmojiKeyboard:!0,icon:"%5B70%E5%91%A8%E5%B9%B4%5D.png"},{id:"001108",text:"[国庆]",hideInEmojiKeyboard:!0,icon:"%5B%E5%9B%BD%E5%BA%86%5D.png"},{id:"001109",text:"[国庆快乐]",hideInEmojiKeyboard:!0,icon:"%5B%E5%9B%BD%E5%BA%86%E5%BF%AB%E4%B9%90%5D.png"},{id:"001110",text:"[圣诞老人]",hideInEmojiKeyboard:!0,icon:"%5B%E5%9C%A3%E8%AF%9E%E8%80%81%E4%BA%BA%5D.png"},{id:"001111",text:"[圣诞树]",hideInEmojiKeyboard:!0,icon:"%5B%E5%9C%A3%E8%AF%9E%E6%A0%91%5D.png"},{id:"001112",text:"[圣诞袜]",hideInEmojiKeyboard:!0,icon:"%5B%E5%9C%A3%E8%AF%9E%E8%A2%9C%5D.png"},{id:"001113",text:"[铃铛]",hideInEmojiKeyboard:!0,icon:"%5B%E9%93%83%E9%93%9B%5D.png"},{id:"001114",text:"[小老鼠]",icon:"%5B%E5%B0%8F%E8%80%81%E9%BC%A0%5D.png"},{id:"001115",text:"[2020]",hideInEmojiKeyboard:!0,icon:"%5B2020%5D.png"},{id:"001117",text:"[灯笼]",icon:"%5B%E7%81%AF%E7%AC%BC%5D.png"},{id:"001118",text:"[钱袋]",icon:"%5B%E9%92%B1%E8%A2%8B%5D.png"},{id:"001119",text:"[鼠年大吉]",hideInEmojiKeyboard:!0,icon:"%5B%E9%BC%A0%E5%B9%B4%E5%A4%A7%E5%90%89%5D.png"},{id:"001120",text:"[舞狮]",icon:"%5B%E8%88%9E%E7%8B%AE%5D.png"},{id:"001121",text:"[戴口罩]",hideInEmojiKeyboard:!0,icon:"%5B%E6%88%B4%E5%8F%A3%E7%BD%A9%5D.png"},{id:"001122",text:"[加油啊]",icon:"%5B%E5%8A%A0%E6%B2%B9%E5%95%8A%5D.png"},{id:"001123",text:"[勤洗手]",icon:"%5B%E5%8B%A4%E6%B4%97%E6%89%8B%5D.png"},{id:"001124",text:"[中国]",icon:"%5B%E4%B8%AD%E5%9B%BD%5D.png"},{id:"001125",text:"[n95口罩]",icon:"%5Bn95%E5%8F%A3%E7%BD%A9%5D.png"},{id:"001126",text:"[月亮]",icon:"%5B%E6%9C%88%E4%BA%AE%5D.png"},{id:"001127",text:"[→_→]",hideInEmojiKeyboard:!0,icon:"%5B%E2%86%92_%E2%86%92%5D.png"},{id:"001128",text:"[⚡]",hideInEmojiKeyboard:!0,icon:"%5B%E2%9A%A1%5D.png"},{id:"001129",text:"[🍉]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%8D%89%5D.png"},{id:"001130",text:"[🍗]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%8D%97%5D.png"},{id:"001131",text:"[🎄]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%8E%84%5D.png"},{id:"001132",text:"[👏]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%91%8F%5D.png"},{id:"001133",text:"[👻]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%91%BB%5D.png"},{id:"001134",text:"[💊]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%92%8A%5D.png"},{id:"001135",text:"[💣]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%92%A3%5D.png"},{id:"001136",text:"[💩]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%92%A9%5D.png"},{id:"001137",text:"[🤓]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%A4%93%5D.png"},{id:"001138",text:"[🤗]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%A4%97%5D.png"},{id:"001139",text:"[👿]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%91%BF%5D.png"},{id:"001140",text:"[😱]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%98%B1%5D.png"},{id:"001141",text:"[🙃]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%83%5D.png"},{id:"001142",text:"[🙅]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%85%5D.png"},{id:"001143",text:"[🙈]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%88%5D.png"},{id:"001144",text:"[🙉]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%89%5D.png"},{id:"001145",text:"[🙊]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%8A%5D.png"},{id:"001146",text:"[🙋]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%8B%5D.png"},{id:"001147",text:"[🙏]",hideInEmojiKeyboard:!0,icon:"%5B%F0%9F%99%8F%5D.png"},{id:"001148",text:"[爱你]",icon:"%5B%E7%88%B1%E4%BD%A0%5D.png"},{id:"001149",text:"[奥特曼]",icon:"%5B%E5%A5%A5%E7%89%B9%E6%9B%BC%5D.png"},{id:"001150",text:"[旅行]",icon:"%5B%E6%97%85%E8%A1%8C%5D.png"},{id:"001151",text:"[点亮平安灯]",icon:"%5B%E7%82%B9%E4%BA%AE%E5%B9%B3%E5%AE%89%E7%81%AF%5D.png"},{id:"001152",text:"[肥皂]",icon:"%5B%E8%82%A5%E7%9A%82%5D.png"},{id:"001153",text:"[浮云]",icon:"%5B%E6%B5%AE%E4%BA%91%5D.png"},{id:"001154",text:"[感冒]",icon:"%5B%E6%84%9F%E5%86%92%5D.png"},{id:"001155",text:"[干杯]",icon:"%5B%E5%B9%B2%E6%9D%AF%5D.png"},{id:"001156",text:"[给力]",icon:"%5B%E7%BB%99%E5%8A%9B%5D.png"},{id:"001157",text:"[给你小心心]",icon:"%5B%E7%BB%99%E4%BD%A0%E5%B0%8F%E5%BF%83%E5%BF%83%5D.png"},{id:"001158",text:"[话筒]",icon:"%5B%E8%AF%9D%E7%AD%92%5D.png"},{id:"001159",text:"[挤眼]",icon:"%5B%E6%8C%A4%E7%9C%BC%5D.png"},{id:"001160",text:"[礼物]",icon:"%5B%E7%A4%BC%E7%89%A9%5D.png"},{id:"001161",text:"[绿丝带]",icon:"%5B%E7%BB%BF%E4%B8%9D%E5%B8%A6%5D.png"},{id:"001162",text:"[男孩儿]",icon:"%5B%E7%94%B7%E5%AD%A9%E5%84%BF%5D.png"},{id:"001163",text:"[女孩儿]",icon:"%5B%E5%A5%B3%E5%AD%A9%E5%84%BF%5D.png"},{id:"001164",text:"[沙尘暴]",icon:"%5B%E6%B2%99%E5%B0%98%E6%9A%B4%5D.png"},{id:"001165",text:"[伤心]",icon:"%5B%E4%BC%A4%E5%BF%83%5D.png"},{id:"001166",text:"[生病]",icon:"%5B%E7%94%9F%E7%97%85%5D.png"},{id:"001167",text:"[酸]",icon:"%5B%E9%85%B8%5D.png"},{id:"001168",text:"[太开心]",icon:"%5B%E5%A4%AA%E5%BC%80%E5%BF%83%5D.png"},{id:"001169",text:"[太阳]",icon:"%5B%E5%A4%AA%E9%98%B3%5D.png"},{id:"001170",text:"[兔子]",icon:"%5B%E5%85%94%E5%AD%90%5D.png"},{id:"001171",text:"[威武]",icon:"%5B%E5%A8%81%E6%AD%A6%5D.png"},{id:"001172",text:"[微风]",icon:"%5B%E5%BE%AE%E9%A3%8E%5D.png"},{id:"001173",text:"[围脖]",icon:"%5B%E5%9B%B4%E8%84%96%5D.png"},{id:"001174",text:"[围观]",icon:"%5B%E5%9B%B4%E8%A7%82%5D.png"},{id:"001175",text:"[武汉加油]",icon:"%5B%E6%AD%A6%E6%B1%89%E5%8A%A0%E6%B2%B9%5D.png"},{id:"001176",text:"[喜]",icon:"%5B%E5%96%9C%5D.png"},{id:"001177",text:"[下雨]",icon:"%5B%E4%B8%8B%E9%9B%A8%5D.png"},{id:"001178",text:"[音乐]",icon:"%5B%E9%9F%B3%E4%B9%90%5D.png"},{id:"001179",text:"[赞啊]",icon:"%5B%E8%B5%9E%E5%95%8A%5D.png"},{id:"001180",text:"[炸鸡腿]",icon:"%5B%E7%82%B8%E9%B8%A1%E8%85%BF%5D.png"},{id:"001181",text:"[照相机]",icon:"%5B%E7%85%A7%E7%9B%B8%E6%9C%BA%5D.png"},{id:"001182",text:"[钟]",icon:"%5B%E9%92%9F%5D.png"},{id:"001183",text:"[猪头]",hideInEmojiKeyboard:!0,icon:"%5B%E7%8C%AA%E5%A4%B4%5D.png"},{id:"001184",text:"[good]",icon:"%5Bgood%5D.png"},{id:"001185",text:"[抱抱]",icon:"%5B%E6%8A%B1%E6%8A%B1%5D.png"},{id:"001186",text:"[悲伤]",icon:"%5B%E6%82%B2%E4%BC%A4%5D.png"},{id:"001187",text:"[并不简单]",icon:"%5B%E5%B9%B6%E4%B8%8D%E7%AE%80%E5%8D%95%5D.png"},{id:"001188",text:"[馋嘴]",icon:"%5B%E9%A6%8B%E5%98%B4%5D.png"},{id:"001189",text:"[吃瓜]",icon:"%5B%E5%90%83%E7%93%9C%5D.png"},{id:"001190",text:"[打脸]",icon:"%5B%E6%89%93%E8%84%B8%5D.png"},{id:"001191",text:"[顶]",icon:"%5B%E9%A1%B6%5D.png"},{id:"001192",text:"[费解]",icon:"%5B%E8%B4%B9%E8%A7%A3%5D.png"},{id:"001193",text:"[跪了]",icon:"%5B%E8%B7%AA%E4%BA%86%5D.png"},{id:"001194",text:"[黑线]",icon:"%5B%E9%BB%91%E7%BA%BF%5D.png"},{id:"001195",text:"[互粉]",icon:"%5B%E4%BA%92%E7%B2%89%5D.png"},{id:"001196",text:"[可怜]",icon:"%5B%E5%8F%AF%E6%80%9C%5D.png"},{id:"001197",text:"[困]",icon:"%5B%E5%9B%B0%5D.png"},{id:"001198",text:"[来]",icon:"%5B%E6%9D%A5%5D.png"},{id:"001199",text:"[喵喵]",icon:"%5B%E5%96%B5%E5%96%B5%5D.png"},{id:"001200",text:"[拳头]",icon:"%5B%E6%8B%B3%E5%A4%B4%5D.png"},{id:"001201",text:"[弱]",icon:"%5B%E5%BC%B1%5D.png"},{id:"001202",text:"[失望]",icon:"%5B%E5%A4%B1%E6%9C%9B%5D.png"},{id:"001203",text:"[思考]",icon:"%5B%E6%80%9D%E8%80%83%5D.png"},{id:"001204",text:"[摊手]",icon:"%5B%E6%91%8A%E6%89%8B%5D.png"},{id:"001205",text:"[握手]",icon:"%5B%E6%8F%A1%E6%89%8B%5D.png"},{id:"001206",text:"[嘻嘻]",icon:"%5B%E5%98%BB%E5%98%BB%5D.png"},{id:"001207",text:"[心]",icon:"%5B%E5%BF%83%5D.png"},{id:"001208",text:"[耶]",icon:"%5B%E8%80%B6%5D.png"},{id:"001209",text:"[右哼哼]",icon:"%5B%E5%8F%B3%E5%93%BC%E5%93%BC%5D.png"},{id:"001210",text:"[左哼哼]",icon:"%5B%E5%B7%A6%E5%93%BC%E5%93%BC%5D.png"},{id:"001211",text:"[作揖]",icon:"%5B%E4%BD%9C%E6%8F%96%5D.png"},{id:"001212",text:"[haha]",icon:"%5Bhaha%5D.png"},{id:"001213",text:"[NO]",icon:"%5BNO%5D.png"},{id:"001214",text:"[ok]",icon:"%5Bok%5D.png"},{id:"001215",text:"[欧耶]",icon:"%5B%E6%AC%A7%E8%80%B6%5D.png"},{id:"001216",text:"[嫌弃]",icon:"%5B%E5%AB%8C%E5%BC%83%5D.png"},{id:"001217",text:"[惊恐]",icon:"%5B%E6%83%8A%E6%81%90%5D.png"},{id:"001218",text:"[社会]",icon:"%5B%E7%A4%BE%E4%BC%9A%5D.png"},{id:"001219",text:"[ok啊]",icon:"%5Bok%E5%95%8A%5D.png"},{id:"001220",text:"[耶耶耶]",icon:"%5B%E8%80%B6%E8%80%B6%E8%80%B6%5D.png"},{id:"001221",text:"[撇嘴]",icon:"%5B%E6%92%87%E5%98%B4%5D.png"},{id:"001222",text:"[emmm]",icon:"%5Bemmm%5D.png"},{id:"001223",text:"[暗中观察]",icon:"%5B%E6%9A%97%E4%B8%AD%E8%A7%82%E5%AF%9F%5D.png"},{id:"001224",text:"[拒绝]",icon:"%5B%E6%8B%92%E7%BB%9D%5D.png"},{id:"001225",text:"[观望]",icon:"%5B%E8%A7%82%E6%9C%9B%5D.png"},{id:"001226",text:"[苦思冥想]",icon:"%5B%E8%8B%A6%E6%80%9D%E5%86%A5%E6%83%B3%5D.png"},{id:"001227",text:"[奥利给]",icon:"%5B%E5%A5%A5%E5%88%A9%E7%BB%99%5D.png"},{id:"001228",text:"[挠头]",icon:"%5B%E6%8C%A0%E5%A4%B4%5D.png"},{id:"001229",text:"[凝视]",icon:"%5B%E5%87%9D%E8%A7%86%5D.png"},{id:"001230",text:"[无所谓]",icon:"%5B%E6%97%A0%E6%89%80%E8%B0%93%5D.png"},{id:"001231",text:"[摸头]",icon:"%5B%E6%91%B8%E5%A4%B4%5D.png"},{id:"001232",text:"[nonono]",icon:"%5Bnonono%5D.png"},{id:"001233",text:"[握草]",icon:"%5B%E6%8F%A1%E8%8D%89%5D.png"},{id:"001234",text:"[苦笑]",icon:"%5B%E8%8B%A6%E7%AC%91%5D.png"},{id:"001235",text:"[饮酒醉]",icon:"%5B%E9%A5%AE%E9%85%92%E9%86%89%5D.png"},{id:"001236",text:"[走你]",icon:"%5B%E8%B5%B0%E4%BD%A0%5D.png"},{id:"001237",text:"[戳脸]",icon:"%5B%E6%88%B3%E8%84%B8%5D.png"},{id:"001238",text:"[呕]",icon:"%5B%E5%91%95%5D.png"},{id:"001239",text:"[泪奔]",icon:"%5B%E6%B3%AA%E5%A5%94%5D.png"},{id:"001240",text:"[额]",icon:"%5B%E9%A2%9D%5D.png"},{id:"001241",text:"[石化]",icon:"%5B%E7%9F%B3%E5%8C%96%5D.png"},{id:"001242",text:"[工人]",hideInEmojiKeyboard:!0,icon:"%5B%E5%B7%A5%E4%BA%BA%5D.png"},{id:"001243",text:"[农民]",hideInEmojiKeyboard:!0,icon:"%5B%E5%86%9C%E6%B0%91%5D.png"},{id:"001244",text:"[稻草人]",hideInEmojiKeyboard:!0,icon:"%5B%E7%A8%BB%E8%8D%89%E4%BA%BA%5D.png"},{id:"001245",text:"[锦旗]",hideInEmojiKeyboard:!0,icon:"%5B%E9%94%A6%E6%97%97%5D.png"},{id:"001246",text:"[大红花]",hideInEmojiKeyboard:!0,icon:"%5B%E5%A4%A7%E7%BA%A2%E8%8A%B1%5D.png"},{id:"001247",text:"[雪花]",icon:"%5B%E9%9B%AA%E8%8A%B1%5D.png"},{id:"001248",text:"[2021]",icon:"%5B2021%5D.png"},{id:"001250",text:"[牛年大吉]",icon:"%5B%E7%89%9B%E5%B9%B4%E5%A4%A7%E5%90%89%5D.png"},{id:"001251",text:"[牛福到]",icon:"%5B%E7%89%9B%E7%A6%8F%E5%88%B0%5D.png"},{id:"001252",text:"[云红包]",icon:"%5B%E4%BA%91%E7%BA%A2%E5%8C%85%5D.png"},{id:"001253",text:"[牛洋洋]",icon:"%5B%E7%89%9B%E6%B4%8B%E6%B4%8B%5D.png"},{id:"001254",text:"[牛斯拉]",icon:"%5B%E7%89%9B%E6%96%AF%E6%8B%89%5D.png"},{id:"001255",text:"[云喝酒]",icon:"%5B%E4%BA%91%E5%96%9D%E9%85%92%5D.png"},{id:"001256",text:"[温暖]",icon:"%5B%E6%B8%A9%E6%9A%96%5D.png"},{id:"001257",text:"[Salute]",icon:"%5BSalute%5D.png"},{id:"001258",text:"[叹气]",icon:"%5B%E5%8F%B9%E6%B0%94%5D.png"},{id:"001259",text:"[裂开]",icon:"%5B%E8%A3%82%E5%BC%80%5D.png"},{id:"001260",text:"[厉害]",icon:"%5B%E5%8E%89%E5%AE%B3%5D.png"},{id:"001261",text:"[吃鲸]",icon:"%5B%E5%90%83%E9%B2%B8%5D.png"},{id:"001262",text:"[比心]",icon:"%5B%E6%AF%94%E5%BF%83%5D.png"},{id:"001263",text:"[AWSL]",icon:"%5BAWSL%5D.png"},{id:"001264",text:"[打工人]",icon:"%5B%E6%89%93%E5%B7%A5%E4%BA%BA%5D.png"},{id:"001265",text:"[小红花]",icon:"%5B%E5%B0%8F%E7%BA%A2%E8%8A%B1%5D.png"},{id:"001266",text:"[金牌]",icon:"%5B%E9%87%91%E7%89%8C%5D.png"},{id:"001267",text:"[牛啤]",icon:"%5B%E7%89%9B%E5%95%A4%5D.png"},{id:"001268",text:"[星星]",icon:"%5B%E6%98%9F%E6%98%9F%5D.png"},{id:"001269",text:"[半星]",icon:"%5B%E5%8D%8A%E6%98%9F%5D.png"},{id:"001270",text:"[2022]",icon:"%5B2022%5D.png"},{id:"001271",text:"[虎年大吉]",icon:"%5B%E8%99%8E%E5%B9%B4%E5%A4%A7%E5%90%89%5D.png"},{id:"001272",text:"[虎妞妞]",icon:"%5B%E8%99%8E%E5%A6%9E%E5%A6%9E%5D.png"},{id:"001273",text:"[小脑斧]",icon:"%5B%E5%B0%8F%E8%84%91%E6%96%A7%5D.png"},{id:"001274",text:"[银牌]",icon:"%5B%E9%93%B6%E7%89%8C%5D.png"},{id:"001275",text:"[铜牌]",icon:"%5B%E9%93%9C%E7%89%8C%5D.png"},{id:"001276",text:"[滑雪]",icon:"%5B%E6%BB%91%E9%9B%AA%5D.png"}]}]},Yt=g(Jt.packages,1)[0],Qt=Yt.emoticons;Yt.blacklist,Yt.version,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt;/(iPhone|iPod|iPad)/.test(t)}(),function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-interact-rich-text{padding-top:10px;font:14px/22px PingFangSC-Regular;color:#222;text-align:justify;word-wrap:break-word;word-break:break-all;word-break:break-word}.x-interact-rich-text>a{text-decoration:none}.x-interact-rich-text .type-at,.x-interact-rich-text .type-image,.x-interact-rich-text .type-link,.x-interact-rich-text .type-topic,.x-interact-rich-text .type-video,.x-interact-rich-text .type-vote{color:#4367b4;cursor:pointer}.x-interact-rich-text .invalid-href.type-at{color:#858585;pointer-events:none}.x-interact-rich-text .type-emoji{width:14px;margin-top:-4px;background-size:100%}.x-interact-rich-text .type-emoji,.x-interact-rich-text .type-label{display:inline-block;height:14px;background-repeat:no-repeat;background-position:50% 50%;vertical-align:middle}.x-interact-rich-text .type-label{width:42px;margin-top:-2px;background-size:cover}.x-interact-rich-text .type-label-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-1.png)}.x-interact-rich-text .type-label-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-2.png)}.x-interact-rich-text-is-author{padding:0 .03rem;font-size:.1rem;color:#4d6df2;background:#e4eaff;border-radius:.03rem}.x-interact-rich-text-colon,.x-interact-rich-text-uname{color:#858585}");var Gt="x-interact-rich-text",Xt={1:"at",3:"link",4:"image"},Zt={1:"link",2:"video",3:"vote"},te=["at","topic","link","video","vote"],ee=function(t){return"https://author.baidu.com/home?context=%7B%22uk%22%3A%22".concat(t,"%22%7D")},ne=(Jt||{}).imgpath||"https://mbdp03.bdstatic.com/sdks/emoticon/img/",ie=function(t){u(n,t);var e=f(n);function n(t){return o(this,n),t.customCls="rich-text",e.call(this,t)}return r(n,[{key:"bindEvent",value:function(t){var e=this.root=t.querySelector(".".concat("rich-text",'[data-reply-id="').concat(this.replyId,'"]'));this.root&&ht(e,".type-image","click",(function(t){var e=t.target.dataset;!function(t){new Vt(t).render()}({list:[{width:e.width,height:e.height,url:e.url}]})}))}}]),n}(function(){function t(e){o(this,t),this.content=e.content,this.contentRich=e.contentRich,this.replyToComment=e.replyToComment,this.hotLevel=e.hotLevel,this.replyId=e.replyId,this.getHomePage=e.getHomePage||ee,this.customCls=e.customCls||"",this.uname=e.uname,this.isAuthor=e.isAuthor,this.richTypeMap=Xt,this.showViewImgText=e.showViewImgText||!1}return r(t,[{key:"makeTpl",value:function(t){var e=this.formatRichText();return e.length?'\n            <div class="'.concat(Gt," ").concat(this.customCls,'" data-reply-id="').concat(this.replyId,'">\n                ').concat(this.uname?'<span class="'.concat(Gt,'-uname">').concat(this.uname,"</span>"):"","\n                ").concat(this.isAuthor?'<span class="'.concat(Gt,'-is-author">作者</span>'):"","\n                ").concat(this.uname||this.isAuthor?'<span class="'.concat(Gt,'-colon">:</span>'):"","\n                ").concat(e.map((function(t){return te.indexOf(t.type)>-1?'\n                            <a\n                                class="'.concat(t.class," ").concat(t.url?"":"invalid-href",'"\n                                href="').concat(t.url,'"\n                                ').concat(t.style?"style=".concat(t.style):"","\n                            >").concat(t.text,"</a>\n                        "):'\n                        <span\n                            class="'.concat(t.class,'"\n                            ').concat(t.style?"style=".concat(t.style):"","\n                            ").concat("image"===t.type?"data-url=".concat(t.url," data-width=").concat(t.width," data-height=").concat(t.height):"","\n                        >").concat((e=t.text,e=String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;")),"</span>\n                    ");var e})).join(""),"\n                ").concat(t||"","\n            </div>\n        "):""}},{key:"formatRichText",value:function(){var t=this,e=this.sliceByRich(this.content,this.contentRich,!this.showViewImgText);if(this.replyToComment&&this.replyToComment.length){var n=[];this.replyToComment.map((function(e){var i=e.user||{},o=i.uname,a=i.uk,r=i.is_bjh_author;n=n.concat([{type:"text",text:" // ",class:"type-text"},{type:"at",text:"@".concat(o),class:"type-at ".concat(r?"is-bjh-author":""),uk:a,url:t.getHomePage(a)},{type:"text",text:"：",class:"type-text"}],t.sliceByRich(e.content,e.content_rich,!1,e.image_list))})),e=e.concat(n)}return+this.hotLevel&&e.unshift({type:"label",text:"",class:"type-label type-label-".concat(this.hotLevel)}),e}},{key:"sliceByRich",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=[],r=0,c=o&&o.large||{};if(e&&e.length){var s=null;e.forEach((function(e){if(4==+e.type)s={type:"image",text:e.attr.text,class:"type-image",url:c.url||e.attr.url,width:c.width,height:c.height};else{r<e.start&&(a=a.concat(n.sliceByEmoji(t.slice(r,+e.start))),r=+e.start);var i=n.richTypeMap[+e.type]||"text";"link"===i&&(i=Zt[+e.attr.icon]||"link");var o=t.slice(+e.start,+e.start+ +e.length);a.push({type:i,text:o,class:"type-".concat(i),uk:e.attr.uk||"",url:("at"===i?n.getHomePage(e.attr.uk):e.attr.link)||""}),r+=+e.length}})),r<t.length&&(a=a.concat(this.sliceByEmoji(t.slice(r)))),!i&&s&&a.push(s)}else a=x(this.sliceByEmoji(t));return a}},{key:"sliceByEmoji",value:function(t){if(!t)return[];var e=/(\[.*?\])/;return t.split(e).filter((function(t){return t.length})).map((function(t){var n="text",i="type-text",o="",a=function(t){for(var e,n="",i=0;i<Qt.length;i++)if((e=Qt[i]).text===t){n=e.icon;break}return n}(t);return e.test(t)&&a&&(n="emoji",i="type-emoji",o="background-image:url(".concat(ne).concat(a,"?t=").concat(Math.floor(Date.now()/1e3/60/60),")"),t=""),{type:n,text:t,style:o,class:i}}))}}]),t}());!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-interact-image{position:relative;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;border:1px solid rgba(0,0,0,.05);border-radius:12px;overflow:hidden}.x-interact-image-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-interact-image-thumb{position:relative;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;height:auto;cursor:-webkit-zoom-in;cursor:zoom-in}.x-interact-image-thumb .tag{position:absolute;right:14px;bottom:14px;font-size:14px;text-shadow:0 0 5px rgba(0,0,0,.3);color:#fff}.x-interact-image-large{position:relative;display:none;width:100%;height:auto;cursor:-webkit-zoom-out;cursor:zoom-out}");var oe=["","GIF","长图"],ae=function(t){u(n,t);var e=f(n);function n(t){var i;return o(this,n),(i=e.call(this,d(d({},t),{},{id:t.replyId,wrapperWidth:"176px",prefixCls:"image-scale"}))).isLarge=!1,i}return r(n,[{key:"bindEvent",value:function(t){var e=this,n=t.querySelector('.image-scale[data-id="'.concat(this.id,'"]')),i=n.querySelector(".image-scale-thumb"),o=n.querySelector(".image-scale-large");ht(n,".".concat("image-scale","-thumb"),"click",(function(t){n.style.width="100%",n.style.height="auto",i.style.display="none",o.style.display="block",e.isLarge=!0})),ht(n,".".concat("image-scale","-large"),"click",(function(t){n.style.width="176px",i.style.display="block",o.style.display="none",e.isLarge=!1}))}}]),n}(function(){function t(e){o(this,t),this.container=e.container,this.thumb=e.thumb,this.large=e.large,this.type=e.type||0,this.id=e.id,this.size=e.size||"1:1",this.scale=this.getScale(this.size);var n=e.wrapperWidth;this.wrapperStyle=e.wrapperStyle||(n?"width: ".concat(n):""),this.prefixCls=e.prefixCls||"x-interact-image"}return r(t,[{key:"render",value:function(){if(this.container){var t=this.makeTpl();this.container.insertAdjacentHTML("beforeend",t)}}},{key:"makeTpl",value:function(){var t=this.thumb;if(t){var e=["padding-top: ".concat(100*this.scale,"%"),"background-image: ".concat(t?"url(".concat(t,")"):"")].join(";"),n=this.prefixCls;return'\n            <div class="'.concat("x-interact-image"," ").concat(n,'"\n                ').concat(this.id?'data-id="'.concat(this.id,'"'):"",'\n                style="').concat(this.wrapperStyle,'"\n            >\n                <div class="').concat("x-interact-image","-placeholder ").concat(n,'-placeholder"></div>\n                <div class="').concat("x-interact-image","-thumb ").concat(n,'-thumb" style="').concat(e,'">\n                    ').concat(+this.type?'<span class="tag">'.concat(oe[+this.type],"<span>"):"","\n                </div>\n                ").concat(this.large?'<img class="'.concat("x-interact-image","-large ").concat(n,'-large" src="').concat(this.large,'"/>'):"","\n            </div>\n        ")}}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1:1",e=1,n=t.split(":")||[],i=+n[0];if(i>0){var o=+n[1]||0;e=o/i}return e}}]),t}()),re=Object.prototype.hasOwnProperty,ce=Array.isArray,se=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),le=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(n[i]=t[i]);return n},de={arrayToObject:le,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],o=0;o<e.length;++o)for(var a=e[o],r=a.obj[a.prop],c=Object.keys(r),s=0;s<c.length;++s){var l=c[s],d=r[l];"object"===i(d)&&null!==d&&-1===n.indexOf(d)&&(e.push({obj:r,prop:l}),n.push(d))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(ce(n)){for(var i=[],o=0;o<n.length;++o)void 0!==n[o]&&i.push(n[o]);e.obj[e.prop]=i}}}(e),t},decode:function(t,e,n){var i=t.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(t){return i}},encode:function(t,e,n){if(0===t.length)return t;var i="string"==typeof t?t:String(t);if("iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",a=0;a<i.length;++a){var r=i.charCodeAt(a);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?o+=i.charAt(a):r<128?o+=se[r]:r<2048?o+=se[192|r>>6]+se[128|63&r]:r<55296||r>=57344?o+=se[224|r>>12]+se[128|r>>6&63]+se[128|63&r]:(a+=1,r=65536+((1023&r)<<10|1023&i.charCodeAt(a)),o+=se[240|r>>18]+se[128|r>>12&63]+se[128|r>>6&63]+se[128|63&r])}return o},isBuffer:function(t){return!(!t||"object"!==i(t)||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,o){if(!n)return e;if("object"!==i(n)){if(ce(e))e.push(n);else{if(!e||"object"!==i(e))return[e,n];(o&&(o.plainObjects||o.allowPrototypes)||!re.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!==i(e))return[e].concat(n);var a=e;return ce(e)&&!ce(n)&&(a=le(e,o)),ce(e)&&ce(n)?(n.forEach((function(n,a){if(re.call(e,a)){var r=e[a];r&&"object"===i(r)&&n&&"object"===i(n)?e[a]=t(r,n,o):e.push(n)}else e[a]=n})),e):Object.keys(n).reduce((function(e,i){var a=n[i];return re.call(e,i)?e[i]=t(e[i],a,o):e[i]=a,e}),a)}},ue=String.prototype.replace,pe=/%20/g,he={default:"RFC3986",formatters:{RFC1738:function(t){return ue.call(t,pe,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"},fe=Object.prototype.hasOwnProperty,me={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},ge=Array.isArray,xe=Array.prototype.push,be=function(t,e){xe.apply(t,ge(e)?e:[e])},ve=Date.prototype.toISOString,ye={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:de.encode,encodeValuesOnly:!1,formatter:he.formatters[he.default],indices:!1,serializeDate:function(t){return ve.call(t)},skipNulls:!1,strictNullHandling:!1},Ee=function t(e,n,i,o,a,r,c,s,l,d,u,p,h){var f=e;if("function"==typeof c?f=c(n,f):f instanceof Date?f=d(f):"comma"===i&&ge(f)&&(f=f.join(",")),null===f){if(o)return r&&!p?r(n,ye.encoder,h):n;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||de.isBuffer(f))return r?[u(p?n:r(n,ye.encoder,h))+"="+u(r(f,ye.encoder,h))]:[u(n)+"="+u(String(f))];var m,g=[];if(void 0===f)return g;if(ge(c))m=c;else{var x=Object.keys(f);m=s?x.sort(s):x}for(var b=0;b<m.length;++b){var v=m[b];a&&null===f[v]||(ge(f)?be(g,t(f[v],"function"==typeof i?i(n,v):n,i,o,a,r,c,s,l,d,u,p,h)):be(g,t(f[v],n+(l?"."+v:"["+v+"]"),i,o,a,r,c,s,l,d,u,p,h)))}return g},Be=(Object.prototype.hasOwnProperty,function(t,e){var n,o=t,a=function(t){if(!t)return ye;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||ye.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=he.default;if(void 0!==t.format){if(!fe.call(he.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=he.formatters[n],o=ye.filter;return("function"==typeof t.filter||ge(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:ye.addQueryPrefix,allowDots:void 0===t.allowDots?ye.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:ye.charsetSentinel,delimiter:void 0===t.delimiter?ye.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:ye.encode,encoder:"function"==typeof t.encoder?t.encoder:ye.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:ye.encodeValuesOnly,filter:o,formatter:i,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:ye.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:ye.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:ye.strictNullHandling}}(e);"function"==typeof a.filter?o=(0,a.filter)("",o):ge(a.filter)&&(n=a.filter);var r,c=[];if("object"!==i(o)||null===o)return"";r=e&&e.arrayFormat in me?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var s=me[r];n||(n=Object.keys(o)),a.sort&&n.sort(a.sort);for(var l=0;l<n.length;++l){var d=n[l];a.skipNulls&&null===o[d]||be(c,Ee(o[d],d,s,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}var u=c.join(a.delimiter),p=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),u.length>0?p+u:""}),ke=new n;function we(t){var e={appid:_.appid,thread_id:_.threadId,parent_id:t.replyId,content:t.text,sync_text:+t.isRadioChecked,ts:Date.now(),client_type:"pc"};return new Promise((function(t,n){var i,o;(i=P.ADDREPLY,o=e,ke.post(i,Be(o,{arrayFormat:"indices"}),void 0)).then((function(e){var i;!+e.errno&&e.ret?t(function(t){var e=t.sync_text_comment;return e&&(t.sync_text_comment=s(e,d(d({},e.user),{},{thread_id:t.thread_id,is_author:!0,like_count:0}))),t}(e.ret)):n((i=e.errno,K[i+""]||"发表失败，请稍后重试"))})).catch((function(t,e){n(z)}))}))}ke.config.withCredentials=!0,ke.config.timeout=1e4,ke.interceptors.response.use((function(t){return t.data}),(function(t){return Promise.reject(t)}));var De=function(){};function Ce(t,e,n){var i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=document,c=t.replace(/^(css|img)!/,""),s=!1,l=n.async,d=void 0===l||l,u=n.maxTries,p=void 0===u?1:u,h=n.timeout,f=void 0===h?2e4:h,m=n.before,g=void 0===m?null:m,x=g;"function"!=typeof x&&(x=De),/(^css!|\.css$)/.test(t)?(s=!0,(i=r.createElement("link")).rel="stylesheet",i.href=c):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(i=r.createElement("img")).src=c:((i=r.createElement("script")).src=t,i.async=!!d);var b=function(r){var c;if(clearTimeout(o),c=r instanceof Error?"e":r.type[0],s&&"hideFocus"in i)try{i.sheet.cssText.length||(c="e")}catch(t){c="e"}if("e"===c&&(a+=1)<p)return Ce(t,e,n,a);i.onload=i.onerror=i.onbeforeload=null,i=null,e("e"===c?r||"error":null,t)};if(i.onload=i.onerror=b,!1!==x(t,i)){var v=r.head||r.getElementsByTagName("script")[0];v.appendChild(i),f>0&&(o=setTimeout((function(){b(new Error("timeout"))}),f))}}var Ae=location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion=",Se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.__instance;if(!e&&n&&n.show)n.show();else{var i=t.apiOpt,o=void 0===i?{}:i,a=t.successCb;delete t.apiOpt,window.__instance=n=window.passport.pop.init(d({loginVersion:"v4",apiOpt:d({loginType:1,u:window.location.href,product:"interact",staticPage:window.location.origin+"/v3Jump.html"},o),cache:!1,tangram:!0,authsite:["tqq","renren","tsina"],onLoginSuccess:function(t){a&&a(t),t.returnValue=!1,window.__instance.hide()},onSubmitStart:function(t){},onSubmitedErr:function(t){},onSystemErr:function(t){},onShow:function(t){},onRealHide:function(t){},onHide:function(t){},onDestroy:function(t){}},t)),n.show()}},je={},Te=function(){return new Promise((function(t){_.isLogin?t():(je.loginSuccessCb=function(e){var n=((e||{}).rsp||{}).data||{};_.isLogin=!0,_.curUserName=n.userName,t()},function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.passport&&window.passport.pop;n?Se(t,e):Ce(Ae+(new Date).getTime(),(function(){Se(t,e)}),{})}({apiOpt:{staticPage:_.passStaticPage},successCb:function(t){je.loginSuccessCb(t)}},!1))}))},Ie=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()};function _e(t,e){return Ie(t)===e.toLowerCase()}var Fe=function(t,e,n){return new TypeError("Expected `"+t+"` to be of type `"+e+"`, got `"+i(n)+"`")},Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(!_e(t,"date"))throw Fe("d","Date",t);var n=t.getFullYear().toString(),i={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};return e=e.replace(/(y+)/gi,(function(t,e){return n.substr(4-Math.min(4,e.length))})),Object.keys(i).forEach((function(t){e=e.replace(new RegExp("("+t+"+)","g"),(function(e,n){return i[t]<10&&n.length>1?"0"+i[t]:i[t]}))})),e};function Pe(t){return null==t}function Le(t){return void 0===t}function Re(t){return!!_e(t,"Object")&&(null===Object.getPrototypeOf(t)||Object===t.constructor)}function Ne(t){return _e(t,"Function")}function He(t){return _e(t,"String")}function ze(t){return _e(t,"Array")}function Me(t){return!0===t||!1===t}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-dialog-classic{width:224px;height:131px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-dialog-classic button{padding:0}.x-dialog-classic-msg{padding-top:30px;font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-classic-oper{padding:21px 20px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-dialog-classic .btn{width:80px;height:32px;font-size:14px;border-radius:16px;border:none;outline:none}.x-dialog-classic-cancel{color:#1f1f1f;background:#f5f5f6}.x-dialog-classic-confirm{color:#fff;background:#4e6ef2}");var Ue="x-dialog-classic",Ke=function(){function t(e){o(this,t),this.container=e.container,this.message=e.message||"确认做此操作吗",this.cancelText=e.cancelText||"取消",this.confirmText=e.confirmText||"确认",this.onCancel=e.onCancel,this.onConfirm=e.onConfirm,this.onClose=e.onClose,this.render(),this.bindEvent()}return r(t,[{key:"render",value:function(){var t='\n            <div class="'.concat(Ue,'">\n                <h3 class="').concat(Ue,'-msg">').concat(this.message,'</h3>\n                <div class="').concat(Ue,'-oper">\n                    <button class="btn ').concat(Ue,'-cancel">').concat(this.cancelText,'</button>\n                    <button class="btn ').concat(Ue,'-confirm">').concat(this.confirmText,"</button>\n                </div>\n            </div>\n        ");this.container.innerHTML=t}},{key:"bindEvent",value:function(){var t=this;Ft(this.container,".".concat(Ue,"-cancel"),"click",(function(e){Ne(t.onCancel)&&t.onCancel(e),t.close()})),Ft(this.container,".".concat(Ue,"-confirm"),"click",(function(e){Ne(t.onConfirm)&&t.onConfirm(e),t.close()})),this.onOtherClickBind=this.onOtherClick.bind(this),setTimeout((function(){Ft(document,"html","click",t.onOtherClickBind)}),0)}},{key:"close",value:function(){Ot(this.container,".".concat(Ue,"-cancel"),"click"),Ot(this.container,".".concat(Ue,"-confirm"),"click"),Ot(document,"html","click",this.onOtherClickBind),this.container.innerHTML="",Ne(this.onClose)&&this.onClose()}},{key:"onOtherClick",value:function(t){this.container.innerHTML&&!t.target.closest(".".concat(Ue))&&this.close()}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-dialog-menu{padding:30px 24px;width:368px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-sizing:content-box;box-sizing:content-box}.x-dialog-menu-title{font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-menu-list{margin-top:8px;font-size:0}.x-dialog-menu-item{width:176px;height:32px;margin-top:12px;padding:0;font-size:14px;border-radius:16px;border:none;outline:none;color:#333;background-color:#f5f5f5}.x-dialog-menu-item:nth-child(2n){margin-left:16px}.x-dialog-menu.is-odd .x-dialog-menu-item:last-child{width:368px}.x-dialog-menu-item:hover{color:#fff;background-color:#4e6ef2}");var qe="x-dialog-menu",$e=function(){function t(e){o(this,t),this.title=e.title,this.list=e.list,this.container=e.container,this.clickCallback=e.clickCallback,this.closeCallback=e.closeCallback,this.container}return r(t,[{key:"render",value:function(){var t=this.makeTpl(this.title,this.list);this.container.insertAdjacentHTML("beforeend",t),this.bindEvent()}},{key:"makeTpl",value:function(t,e){var n=(e&&e.length||0)%2==1?"is-odd":"";return'\n            <div class="'.concat(qe," ").concat(n,'">\n                <h3 class="').concat(qe,'-title">').concat(t,'</h3>\n                <div class="').concat(qe,'-list">\n                ').concat(e.map((function(t,e){return'\n                        <button class="'.concat(qe,'-item" data-id="').concat(e,'">').concat(t.text,"</button>\n                    ")})).join(""),"\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(){var t=this;Ft(this.container,".".concat(qe),"click",(function(e){e.preventDefault(),e.stopPropagation();var n=e.target;if(n.className==="".concat(qe,"-item")){t.close();var i=n.dataset.id,o=t.list[i];o&&Ne(t.clickCallback)&&t.clickCallback({item:o})}})),this.outerClkFunc=this.outerClick.bind(this),setTimeout((function(){Ft(document,"html","click",t.outerClkFunc)}),0)}},{key:"close",value:function(){Ot(this.container,".".concat(qe),"click"),Ot(document,"html","click",this.outerClkFunc);var t=this.container.querySelector(".".concat(qe));t&&(t.outerHTML=""),Ne(this.closeCallback)&&this.closeCallback()}},{key:"outerClick",value:function(t){!t.target.closest(".".concat(qe))&&this.close()}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-interact-emoj-panel{height:100%;overflow-y:auto}.x-interact-emoj-panel-wrapper{-webkit-box-sizing:border-box;box-sizing:border-box;width:443px;height:230px;line-height:0;padding:20px 6px 20px 20px;font-size:0;border-radius:12px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-interact-emoj-panel::-webkit-scrollbar{width:3px}.x-interact-emoj-panel::-webkit-scrollbar-thumb{border-radius:10px;background-color:#f2f2f2}.x-interact-emoj-panel .img-wrap{display:inline-block;margin:5px;padding:5px;border-radius:6px}.x-interact-emoj-panel .img-wrap:hover{background-color:rgba(51,136,255,.2)}.x-interact-emoj-panel .emoj-img{width:30px}");var Ve="x-interact-emoj-panel",We=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.options=d({containerId:Ve,clickCallback:function(){}},e),this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container}return r(t,[{key:"render",value:function(){this.container.classList.add("".concat(Ve,"-wrapper")),this.container.innerHTML=this.makeTpl(),this.bindEvent(this.options.clickCallback)}},{key:"makeTpl",value:function(){var t=g(Jt.packages,1)[0],e=Jt.imgpath,n=t.emoticons||[],i=Oe(new Date,"yyyyMMddhh");return'\n            <div class="'.concat(Ve,'">\n                ').concat(n.map((function(t){var n=t.text,o=t.icon,a=t.id;return t.hideInEmojiKeyboard?"":'\n                        <span class="img-wrap" data-text="'.concat(n,'" data-id="').concat(a,'">\n                            <img class="emoj-img" src="').concat(e).concat(o,"?r=").concat(i,'" title="').concat(n,'"/>\n                        </span>\n                    ')})).join(""),"\n            </div>\n        ")}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display="block"}},{key:"toggle",value:function(){"none"===this.container.style.display?this.show():this.hide()}},{key:"bindEvent",value:function(t){var e=this;Ft(this.container,this.containerId,"click",(function(n){n.preventDefault(),n.stopPropagation();var i=n.target;if("#".concat(i.id)===e.containerId)e.hide();else{"emoj-img"===i.className&&(i=i.parentElement);var o=i.dataset,a=o.text,r=o.id;a&&Ne(t)&&t({text:a,id:r})}})),Ft(document,"html","click",(function(t){e.hide()}))}}]),t}(),Je=function(t){var e=new We(t);return e.render(),e},Ye=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n=n||window.innerHeight||document.documentElement.clientHeight;var i=document.documentElement.scrollTop||window.pageYOffset;return!(n+i-t.offsetTop<=e||t.offsetTop+t.clientHeight<i)};!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}('.x-interact-publish{width:100%;font-size:13px;color:#222}.x-interact-publish-panel-center{padding-top:4px}.x-interact-publish-cont{height:94px}.x-interact-publish-cont,.x-interact-publish-cont-topic{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background:#f5f5f6;border-radius:12px}.x-interact-publish-cont-topic{min-height:94px;max-height:160px;overflow-y:auto}.x-interact-publish .text-area{padding:16px 16px 23px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f}.x-interact-publish .text-area:empty:before{content:attr(placeholder)}.x-interact-publish .text-area:focus{outline:none}.x-interact-publish .textarea-topic{padding:13px 16px 11px;min-width:200px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f;overflow:hidden;overflow-y:auto;-webkit-user-select:text;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre-wrap;-webkit-box-sizing:border-box;box-sizing:border-box}.x-interact-publish .textarea-topic:before,.x-interact-publish .textarea-topic:empty:before{content:attr(content);color:#4e6ef2;white-space:nowrap;word-break:break-all;padding-right:5px;line-height:1.5}.x-interact-publish .textarea-topic .placeholder-dom:before{display:inline-block;content:attr(placeholder);color:#626675}.x-interact-publish .textarea-topic:focus{outline:none}.x-interact-publish-opt{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:30px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:8px}.x-interact-publish .emoj,.x-interact-publish .img-upload{display:inline-block;height:20px;width:20px;background-size:contain;background-repeat:no-repeat}.x-interact-publish .emoj:hover,.x-interact-publish .img-upload:hover{cursor:pointer}.x-interact-publish .emoj{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn2.png)}.x-interact-publish .emoj:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn-active2.png)}.x-interact-publish .img-upload{margin-left:30px;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn3.png)}.x-interact-publish .img-upload:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn-active3.png)}.x-interact-publish .radio{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-interact-publish .radio:hover{cursor:pointer}.x-interact-publish .radio:not(:first-child){margin-left:30px}.x-interact-publish .radio:before{content:"";display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:26px;width:26px;border:2px solid #222;border-radius:100%;-webkit-transform-origin:left;transform-origin:left;-webkit-transform:scale(.5);transform:scale(.5);margin-right:-9px}.x-interact-publish .radio.checked:before{border:none;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-radio-selected.png);background-size:contain;background-repeat:no-repeat;background-color:#4e6ef2}.x-interact-publish .no-radio .radio{display:none}.x-interact-publish .extra{position:absolute;right:90px;color:#858585}.x-interact-publish .extra .exceed{color:#f73131}.x-interact-publish .send{position:absolute;top:0;right:0;width:80px;height:30px;line-height:30px;font-size:14px;text-align:center;color:#fff;background:#4e6ef2;border-radius:15px;cursor:pointer}.x-interact-publish .send.disabled{opacity:.2;cursor:not-allowed}.x-interact-publish .emoj-panel{background:#fff}.x-interact-publish .emoj-panel.float-up{position:absolute;z-index:1}.x-interact-publish .emoj-panel.float-right{right:-16px}');var Qe="x-interact-publish",Ge=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.options=d({containerId:Qe,placeholder:"发表神评妙论",radio:{label:"同时评论原文",checked:!1},maxTextNum:300,showNumLimit:20,isEmojShow:!0,isEmojFloatUp:!1,isUploadImgShow:!1,isAllowedSendNull:!1},e);var n=this.options.topicObj||{};this.isTopic=n.isTopic,this.topicWord=n.topicWord;var i=e.actionCallback,a=e.sendCallback;this.sendCallback=Ne(a)?a:function(){},this.actionCallback=Ne(i)?i:function(){},this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container&&(this.emojPanel="",this.options.emojPanelId=this.options.isEmojShow?this.options.containerId+"_emoj_panel":"",this.imgList=[],this.options.imgListPanelId=this.options.isUploadImgShow?this.options.containerId+"_img_list_panel":"")}return r(t,[{key:"render",value:function(){this.container.innerHTML=this.makeTpl(d({},this.options)),this.setMainDom(),this.bindEvent(),this.checkRealShow(),this.isTopic&&(this.getSessionStorage(),this.createPlaceholderNode()),this.isTopic&&this.getSessionStorage(),this.setExtra(this.options)}},{key:"createPlaceholderNode",value:function(){var t=document.createElement("span");t.classList.add("placeholder-dom"),t.setAttribute("placeholder",this.options.placeholder),this.textarea.innerHTML="",this.textarea.appendChild(t);var e=document.createTextNode(" ");this.textarea.appendChild(e),this.placeholderDom=this.container.querySelector(".placeholder-dom")}},{key:"getSessionStorage",value:function(){var t=sessionStorage.getItem("textareaHTML");t&&(this.textarea.innerHTML=t),this.insertPlaceholder()}},{key:"insertPlaceholder",value:function(){var t=this.textarea.innerText;(!t.trim()||JSON.stringify(t)===JSON.stringify("\n"))&&(this.textarea.innerHTML="",this.createPlaceholderNode(),this.setMainDom(),this.setExtra(this.options),sessionStorage.setItem("textareaHTML",this.textarea.innerHTML))}},{key:"setMainDom",value:function(){this.isTopic?this.textarea=this.container.querySelector(".textarea-topic"):this.textarea=this.container.querySelector(".text-area"),this.operatorBar=this.container.querySelector(".".concat(Qe,"-opt")),this.radio=this.container.querySelector(".radio"),this.radio.checked=!!this.options.radio.checked,this.extra=this.container.querySelector(".extra"),this.send=this.container.querySelector(".send"),this.body=document.querySelector("body")}},{key:"makeTpl",value:function(t){var e=t.placeholder,n=t.radio,i=void 0===n?{}:n,o=t.emojPanelId,a=t.isEmojFloatUp,r=t.imgListPanelId,c=t.isAllowedSendNull,s=t.topicObj||{},l=s.topicWord,d=s.isTopic,u='<textarea contenteditable="true" class="text-area '.concat(e?"placeholder":"",'"\n        placeholder="').concat(e,'"></textarea>'),p='<div\n            content="'.concat(l,'"\n            contenteditable="true"\n            class="textarea-topic"></div>');return'\n            <div class="'.concat(Qe,'">\n                <div class="').concat(d?Qe+"-cont-topic":Qe+"-cont",'">\n                    ').concat(d?p:u,'\n                    <div class="other"></div>\n                </div>\n                <div class="').concat(Qe,'-panel-center">\n                    ').concat(r?'<div id="'.concat(r,'"></div>'):"",'\n                </div>\n                <div class="').concat(Qe,"-opt ").concat(i.label?"":"no-radio",'">\n                ').concat(o?'\n                    <span class="emoj"></span>\n                ':"","\n                ").concat(r?'\n                    <div class="img-upload"></div>\n                ':"",'\n                    <span class="radio ').concat(i.checked?"checked":"",'">').concat(i.label,'</span>\n                    <span class="extra"></span>\n                    <span class="send ').concat(c?"":"disabled",'">发表</span>\n                </div>\n                <div class="').concat(Qe,'-panel-bottom">\n                    <div\n                        id="').concat(o,'"\n                        class="emoj-panel ').concat(a?"float-up":""," ").concat(d?"float-right":"",'"\n                    >\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this;Ft(this.container,".textarea-topic","paste",(function(e){if(t.isTopic){var n=event||window.event;n.preventDefault();var i=(n.originalEvent||n).clipboardData.getData("text/plain");document.execCommand("insertText",!1,i)}})),Ft(this.body,"body","click",(function(e){t.isTopic&&t.insertPlaceholder(),t.emojPanelHide()})),Ft(this.container,this.containerId,"click",(function(e){e.preventDefault(),e.stopPropagation();var n=e.target.className.trim();-1!==n.indexOf("radio")&&(n="radio"),-1!==n.indexOf("text-area")&&(n="text-area"),-1!==n.indexOf("textarea-topic")&&(n="textarea-topic");var i=t.actionCallback;switch(n){case"emoj":t.emojClk(t.options),i("publish-emoj-click");break;case"radio":t.emojPanelHide(),t.radioClk(),i("publish-radio-click",{checked:t.radio.checked});break;case"send":t.emojPanelHide(),t.sendClk(),i("publish-send-click");break;case"text-area":t.emojPanelHide(),i("publish-textarea-click");break;case"textarea-topic":var o=getSelection();t.lastEditRange=o.getRangeAt(0),t.emojPanelHide(),i("publish-textarea-click");break;case"img-upload":t.emojPanelHide(),t.pickImage();break;default:if(t.isTopic){t.textarea.focus();var a=getSelection();t.lastEditRange=a.getRangeAt(0)}t.emojPanelHide()}})),Ft(this.container,".text-area","keyup",(function(e){t.setExtra(t.options)})),Ft(this.container,".textarea-topic","keyup",(function(e){t.setExtra(t.options);var n=getSelection();t.lastEditRange=n.getRangeAt(0),sessionStorage.setItem("textareaHTML",t.textarea.innerHTML)})),Ft(this.container,".textarea-topic","keydown",(function(e){var n=getSelection();if(13==+(window.event?e.keyCode:e.which)){var i=n.anchorNode,o=i.nodeValue,a=n.anchorOffset,r=!1,c=i.nextElementSibling,s=i.nextSibling;return(void 0===c?!s:!c)&&o&&o.length===+a&&(r=!0),r?t.insertHtml("<br><br>"):t.insertHtml("<br>"),!1}})),Ft(this.container,".textarea-topic","focus",(function(e){var n=t.placeholderDom&&t.placeholderDom.parentNode;n&&n.removeChild(t.placeholderDom),sessionStorage.setItem("textareaHTML",t.textarea.innerHTML)}))}},{key:"insertHtml",value:function(t){var e,n;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=t;for(var o,a,r=document.createDocumentFragment(),c=i.firstChild;o=i.firstChild;)a=r.appendChild(o);n.insertNode(r),a&&((n=n.cloneRange()).setStartAfter(c),n.collapse(!0),e.removeAllRanges(),e.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(t)}},{key:"setTextarea",value:function(t,e){if(this.isTopic){this.textarea.focus();var n=getSelection();if(this.lastEditRange&&(n.removeAllRanges(),n.addRange(this.lastEditRange)),"#text"!=n.anchorNode.nodeName){var i=document.createTextNode(t);if(this.textarea.childNodes.length>0)for(var o=0;o<this.textarea.childNodes.length;o++)o==n.anchorOffset&&this.textarea.insertBefore(i,this.textarea.childNodes[o]);else this.textarea.appendChild(i);var a=document.createRange();a.selectNodeContents(i),a.setStart(i,i.length),a.collapse(!0),n.removeAllRanges(),n.addRange(a)}else{var r=n.getRangeAt(0),c=r.startContainer,s=r.startOffset;c.insertData(s,t),r.setStart(c,s+t.length),r.collapse(!0),n.removeAllRanges(),n.addRange(r)}this.lastEditRange=n.getRangeAt(0),sessionStorage.setItem("textareaHTML",this.textarea.innerHTML)}else{e=e||this.textarea.selectionStart;var l=this.textarea.value;l=l.slice(0,e)+t+l.slice(e),this.textarea.value=l,this.textarea.setSelectionRange(e+t.length,l.length)}}},{key:"clearTextarea",value:function(){this.isTopic?(this.createPlaceholderNode(),this.setMainDom()):this.textarea.value="";var t=this.options,e=this.radio;t.radio.label&&e&&e.checked&&(e.classList.remove("checked"),e.checked=!1),this.sendEnable()}},{key:"getTextarea",value:function(){return this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value}},{key:"setExtra",value:function(t){var e=t.maxTextNum,n=t.showNumLimit,i=e-(this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value).length,o="",a="";i<0?(o="超出",a="exceed",i=-i,this.sendEnable(!1)):(o="剩余",this.sendEnable(!0),i>n&&(i=-1)),this.extra.innerHTML=i>=0?"".concat(o,'<span class="').concat(a,'">').concat(i,"</span>字"):""}},{key:"emojClk",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.emojPanel;n?n.toggle():this.emojPanel=Je({containerId:e.emojPanelId,clickCallback:function(n){t.setTextarea(n.text),t.setExtra(e),t.actionCallback("publish-emojItem-click",{id:n.id})}})}},{key:"emojPanelHide",value:function(){var t=this.emojPanel;t&&t.hide()}},{key:"radioClk",value:function(){this.radio.classList.toggle("checked"),this.radio.checked=!this.radio.checked}},{key:"sendClk",value:function(){if(!this.send.classList.contains("disabled")){var t={text:this.getTextarea()};this.options.radio.label&&(t.isRadioChecked=this.radio.checked),this.options.isUploadImgShow&&this.imgList.length&&(t.imgList=this.imgList),Ne(this.sendCallback)&&this.sendCallback(t)}}},{key:"sendEnable",value:function(t){!0!==t&&!1!==t||(this.globalSendEnable=t);var e=this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value,n=this.options,i=n.isUploadImgShow,o=n.isAllowedSendNull,a=o||!o&&!!e||i&&this.imgList.length,r=!1!==this.globalSendEnable&&a?"remove":"add";this.send.classList[r]("disabled")}},{key:"hide",value:function(){this.container.style.display="none",this.getTextarea()&&this.actionCallback("publish-textarea-draft")}},{key:"show",value:function(){this.container.style.display="block"}},{key:"checkRealShow",value:function(t){var e=this.actionCallback;if(Ye(this.container)&&e("publish-show"),Ye(this.operatorBar)){this.options.emojPanelId&&e("publish-emoj-show");var n=this.options.radio,i=n.label,o=n.checked;i&&e("publish-radio-show",{checked:o}),t&&t()}}},{key:"pickImage",value:function(){}}]),t}(),Xe=function(t){var e=new Ge(t);return e.render(),e};!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".x-toast{position:fixed;left:50%;bottom:20%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:10px 12px;font-size:13px;line-height:13px;color:#fff;background:#626675;border-radius:8px}");var Ze=function(){function t(){o(this,t)}return r(t,null,[{key:"show",value:function(t){var e=this;this.timer&&this.hide(),this.text=t.text,this.duration=t.duration||3e3,this.afterHide=t.afterHide,this.render(),this.timer=setTimeout((function(){e.hide()}),this.duration)}},{key:"hide",value:function(){this.el&&(this.clear(),this.changeStyle("display","none"),Ne(this.afterHide)&&this.afterHide())}},{key:"render",value:function(){if(this.el)this.el.innerText=this.text,this.changeStyle("display","block");else{var t=document.createElement("div");t.classList.add("x-toast"),t.innerText=this.text,this.el=t,document.body.appendChild(t)}}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"changeStyle",value:function(t,e){this.el.style[t]=e}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".interact-bar{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:8px;font-family:PingFangSC-Regular;font-size:13px;color:#9195a3}.interact-bar:hover .delete,.interact-bar:hover .report{display:block}.interact-bar>*{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-left{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.interact-bar-left .delete,.interact-bar-left .report{display:none;margin-left:10px;cursor:pointer}.interact-bar-right{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#222}.interact-bar-right .like,.interact-bar-right .reply{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-right .icon{background-repeat:no-repeat;background-size:cover;background-position:50%}.interact-bar-right .reply{cursor:pointer}.interact-bar-right .reply-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-reply.png)}.interact-bar-right .like{cursor:pointer;margin-left:16px}.interact-bar-right .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-like.png)}.interact-bar-right .like.liked{color:#f33}.interact-bar-right .like.liked .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-liked.png)}.interact-bar-right .icon{width:20px;height:20px;margin-right:3px}.interact-bar .custom-dialog{position:absolute;left:0;top:56px;z-index:1}");var tn=V(),en=function(){function t(e){var n=this;o(this,t),this.createTime=e.createTime,this.isAuthor=e.isAuthor,this.uname=e.uname,this.isUped=!!+e.isUped,this.likeCount=+e.likeCount,this.appid=e.appid,this.threadId=e.threadId,this.replyId=e.replyId,this.onDeleteSuccess=e.onDeleteSuccess,this.onReplySuccess=e.onReplySuccess,this.actionCallback=e.actionCallback,tn.on("closeOtherReplyPublish",(function(){n.showReplyPublish&&n.toggleReplyPublish()}))}return r(t,[{key:"makeTpl",value:function(){return'\n            <div class="'.concat("interact-bar",'" data-reply-id="').concat(this.replyId,'">\n                <div class="').concat("interact-bar",'-left">\n                    <span class="time">').concat(function(t){var e="刚刚";if(!t)return e;var n=1e3*t;t=new Date(n);var i=(Date.now()-n)/1e3,o=t.getFullYear();return(new Date).getFullYear()!==o?e=Oe(t,"yyyy-MM-dd"):i>86400?e=Oe(t,"MM-dd hh:mm"):i>3600?e=parseInt(i/3600,10)+"小时前":i>60&&(e=parseInt(i/60,10)+"分钟前"),e}(this.createTime),"</span>\n                    ").concat(this.isAuthor?'<span class="delete">删除</span>':'<span class="report">举报</span>','\n                </div>\n                <div class="').concat("interact-bar",'-right">\n                    <div class="reply">\n                        <i class="icon reply-icon"></i>\n                        <span class="reply-text">回复</span>\n                    </div>\n                    <div class="like ').concat(+this.isUped?"liked":"",'">\n                        <i class="icon like-icon"></i>\n                        <span class="like-text">').concat(this.likeCount?this.likeCount:"赞","</span>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(t){var e=this,n=this.root=t.querySelector(".".concat("interact-bar",'[data-reply-id="').concat(this.replyId,'"]'));ht(n,".delete","click",(function(t){e.openPanel("classic",e.onClickDelete.bind(e)),e.actionCallback("xcp-delete-click")})),ht(n,".report","click",(function(t){e.openPanel("report",e.onClickReport.bind(e)),e.actionCallback("xcp-report-click")})),ht(n,".reply","click",(function(t){e.toggleReplyPublish(),e.actionCallback("xcp-reply-click")})),ht(n,".like","click",(function(t){e.onClickUpdown(),e.actionCallback("xcp-like-click",{liked:+e.isUped})}))}},{key:"onClickDelete",value:function(){var t=this;this.deleting||(this.deleting=!0,nt({url:P.DELETE,data:{appid:this.appid,thread_id:this.threadId,reply_id:this.replyId,user_type:0,ts:Date.now(),callback:"?"},success:function(e){e&&!+e.errno?(t.root&&w(t.onDeleteSuccess)&&t.onDeleteSuccess(),t.toastCallback("xcp-delete-succ","删除成功")):t.toastCallback("xcp-delete-error","删除失败，请稍后重试"),t.deleting=!1},error:function(e,n){t.toastCallback("xcp-net-error",z),t.deleting=!1}}))}},{key:"onClickReport",value:function(t){var e=this;this.reporting||Te().then((function(){e.reporting=!0,e.actionCallback("xpc-login-succ",{userName:_.curUserName,location:"report"}),nt({url:P.REPORT,data:{appid:e.appid,thread_id:e.threadId,reply_id:e.replyId,reason:t.item&&t.item.id,ts:Date.now(),callback:"?"},success:function(t){t&&!+t.errno?e.toastCallback("xcp-other-event","感谢你的举报"):e.toastCallback("xcp-other-event",z),e.reporting=!1},error:function(t,n){e.toastCallback("xcp-other-event",z),e.reporting=!1}})}))}},{key:"onClickUpdown",value:function(){var t=this;this.updowning||Te().then((function(){t.updowning=!0,t.actionCallback("xpc-login-succ",{userName:_.curUserName,location:"like"}),nt({url:P.UPDOWN,data:s({appid:t.appid,thread_id:t.threadId,reply_id:t.replyId,ts:Date.now(),callback:"?"},t.isUped?{undo_type:1}:{type:1}),success:function(e){var n=e&&e.errno;0==+n?t.changeUpdownStatus(!t.isUped):897==+n?t.changeUpdownStatus(!t.isUped,!0):701==+n?t.toastCallback("xcp-other-event","点击太频繁了，休息一下吧"):t.toastCallback("xcp-other-event",z),t.updowning=!1},error:function(e,n){t.toastCallback("xcp-other-event",z),t.updowning=!1}})}))}},{key:"changeUpdownStatus",value:function(t,e){if(this.root){this.isUped=t;var n=this.root.querySelector(".like"),i=n.querySelector(".like-text");e?n.classList.add("liked"):t?(n.classList.add("liked"),i.innerText=++this.likeCount):(n.classList.remove("liked"),i.innerText=--this.likeCount,this.likeCount<=0&&(this.likeCount=0,i.innerText="赞"))}}},{key:"openPanel",value:function(t,e){var n=document.createElement("div");n.classList.add("custom-dialog"),this.root.insertAdjacentElement("beforeend",n),"classic"===t?new Ke({container:n,message:"确认要删除该评论吗",onConfirm:function(){w(e)&&e()},onClose:function(){return n.parentElement.removeChild(n)}}):"report"===t?function(t){new $e(t).render()}({container:n,title:"选择举报原因",list:M,clickCallback:function(t){w(e)&&e(t)},closeCallback:function(){return n.parentElement.removeChild(n)}}):w(e)&&e()}},{key:"toggleReplyPublish",value:function(){var t=this,e="reply-".concat(this.replyId),n=this.root.querySelector(".reply-text"),i=function(){t.showReplyPublish=!1;var i=document.getElementById(e);i.parentElement.removeChild(i),n.innerText="回复"};if(this.showReplyPublish)i();else{tn.emit("closeOtherReplyPublish"),this.showReplyPublish=!0,n.innerText="取消回复";var o=document.createElement("div");o.id=e,o.style.paddingTop="17px",this.root.insertAdjacentElement("afterEnd",o),Xe({containerId:e,radio:{label:"同时评论原文",checked:!1},placeholder:"回复".concat(this.uname,":"),sendCallback:function(e){e.text&&Te().then((function(){t.actionCallback("xpc-login-succ",{userName:_.curUserName,location:"reply"}),we(d({replyId:t.replyId},e)).then((function(e){i(),w(t.onReplySuccess)&&t.onReplySuccess(e)})).catch((function(e){t.toastCallback("xcp-publish-error",e)}))}))},actionCallback:this.actionCallback})}}},{key:"toastCallback",value:function(t,e){_.hideToast?this.actionCallback(t,e):Ze.show({text:e})}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".xcp-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:28px;font-size:14px;color:#222}.xcp-item .left{width:64px}.is-second .xcp-item .left{width:55px}.xcp-item .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:1%}.is-second .xcp-item{padding-top:28px}");var nn=function(){function t(e){o(this,t),this.container=e.container,this.appid=e.appid,this.data=e.data||{},this.isSecond=e.isSecond||!1,this.onDeleteSuccess=e.onDeleteSuccess,this.unshiftReply=e.unshiftReply,this.syncTextComment=e.syncTextComment,this.actionCallback=e.actionCallback,this.render(),this.bindEvent()}return r(t,[{key:"render",value:function(){var t=this,e=this.data,n=document.createElement("div");n.classList.add("xcp-item"),n.dataset.replyId=e.reply_id;var i=document.createElement("div"),o=document.createElement("div");if(i.classList.add("left"),o.classList.add("right"),this.avatar=new vt({container:i,src:e.avatar,vip:e.vtype,isSmall:this.isSecond,url:U(e.uk),actionCallback:this.actionCallback}),this.userBar=new yt({uname:e.uname,isAuthor:e.author_comment,verified:e.verified,decorations:e.decorations}),this.richText=new ie({content:e.content,contentRich:e.content_rich,replyToComment:e.reply_to_comment,hotLevel:e.hot_level,replyId:e.reply_id}),this.interactBar=new en({createTime:e.create_time,isAuthor:e.is_author,uname:e.uname,isUped:e.is_uped,likeCount:e.like_count,appid:this.appid,threadId:e.thread_id,replyId:e.reply_id,onDeleteSuccess:function(){return t.onDeleteSuccess({target:t.container,replyCount:+e.reply_count||0})},onReplySuccess:function(e){return t.onReplySuccess(e)},actionCallback:this.actionCallback}),e.image_list){var a=e.image_list;this.imageScale=new ae({thumb:a.thumb&&a.thumb.url,large:a.large&&a.large.url,type:a.type,replyId:e.reply_id})}var r="\n            ".concat(this.userBar.makeTpl(),"\n            ").concat(this.richText.makeTpl(),"\n            ").concat(this.imageScale&&this.imageScale.makeTpl()||"","\n            ").concat(this.interactBar.makeTpl(),"\n        ");if(o.innerHTML=r,e.reply_list&&e.reply_list.length){var c=document.createElement("div");this.children=new an({container:c,appid:this.appid,threadId:e.thread_id,isSecond:!0,listData:e.reply_list,parentId:e.reply_id,replyCount:e.reply_count,onUpdateReplyCount:function(e){return t.onUpdateReplyCount(e)},actionCallback:this.actionCallback}),o.appendChild(c)}n.insertAdjacentElement("afterbegin",i),n.insertAdjacentElement("beforeend",o),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var t=this,e=this.container;this.richText.bindEvent(e),this.imageScale&&this.imageScale.bindEvent(e),this.interactBar.bindEvent(e),ht(e,".".concat("xcp-item"),"click",(function(e){var n=e.target;(n.closest(".".concat(t.avatar.prefixCls))||n.closest(".".concat(t.userBar.prefixCls)))&&(e.preventDefault(),e.stopPropagation(),t.actionCallback("xcp-user-click"),window.open(U(t.data.uk)))}))}},{key:"onReplySuccess",value:function(t){var e=this;if(t.sync_text_comment&&w(this.syncTextComment)&&this.syncTextComment(t.sync_text_comment),this.isSecond)w(this.unshiftReply)&&this.unshiftReply(t);else if(this.children)this.children.unshiftItem(t);else{this.data.reply_count=1,this.data.reply_list=[t];var n=document.createElement("div");this.children=new an({container:n,appid:this.appid,threadId:t.thread_id,isSecond:!0,listData:this.data.reply_list,parentId:this.data.reply_id,replyCount:this.data.reply_count,onUpdateReplyCount:function(t){return e.onUpdateReplyCount(t)},actionCallback:this.actionCallback}),this.container.querySelector(".right").insertAdjacentElement("beforeEnd",n),this.children.changeCommentCount({type:"++"})}}},{key:"onUpdateReplyCount",value:function(t){this.data.reply_count=t}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".xcp-list *{-webkit-box-sizing:content-box;box-sizing:content-box}.xcp-list-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-list-loader{margin-top:64px;height:42px;font:14px PingFangSC-Regular;text-align:center;line-height:42px;color:#626675;background:#f5f5f6;border-radius:6px;cursor:pointer}.xcp-list-loader.no-more{background:transparent}.xcp-list-loader.is-second{margin-top:30px;padding-left:55px;height:auto;text-align:left;font:13px/1 PingFangSC-Semibold;font-size:13px;color:#222;background:transparent}.xcp-list-loader.is-second .icon{display:inline-block;width:17px;height:13px;background-repeat:no-repeat;background-size:cover;vertical-align:middle}.xcp-list-loader.is-second .icon-up{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-up.png)}.xcp-list-loader.is-second .icon-down{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-down.png)}");var on=V(),an=function(){function t(e){var n=this;o(this,t),this.container=e.container,this.appid=e.appid,this.threadId=e.threadId||"",this.source=e.source||"",this.isSecond=e.isSecond||!1,this.listData=e.listData||[],this.parentId=e.parentId||"0",this.replyCount=+e.replyCount||0,this.onUpdateReplyCount=e.onUpdateReplyCount,this.onUpdateData=e.onUpdateData,this.actionCallback=w(e.actionCallback)?e.actionCallback:function(){},this.queryConf=s({},F,{thread_id:this.threadId,appid:this.appid,use_uk:1}),this.isSecond&&(delete this.queryConf.inner_order,this.queryConf=s(this.queryConf,{num:10,use_list:0,reply_id:this.parentId,order:"9"})),this.loaderStatus={isClosed:!0},this.isSecond&&this.listData.length?(this.render(),this.loaderStatus.hasMore=this.replyCount>2,this.savedOutReplyId=this.listData.map((function(t){return t.reply_id}))):this.fetchData(),this.bindEvent(),this.isSecond||(on.on("syncTextComment",(function(t){return n.syncTextComment(t)})),on.on("changeCommentCount",(function(t){return n.changeCommentCount(t)})))}return r(t,[{key:"fetchData",value:function(){var t=this;this.changeLoaderStatus({isLoading:!0}),nt({url:this.isSecond?P.LIST2:P.LIST1,data:s(this.queryConf,{ts:Date.now()}),success:function(e){if(e&&!+e.errno&&e.ret){var n=e.ret||{};t.isSecond&&t.loaderStatus.isClosed&&(t.changeLoaderStatus({isClosed:!1}),n.list=n.list.filter((function(e){return-1===t.savedOutReplyId.indexOf(e.reply_id)}))),t.updateData(n),(n.list||[]).length&&t.render()}else t.changeLoaderStatus({isLoading:!1,isError:!0})},error:function(e,n){t.changeLoaderStatus({isLoading:!1,isError:!0})}})}},{key:"updateData",value:function(t){this.allData=t,this.listData=t.list||[],this.isSecond||(_.commentCount=+t.comment_count,_.isLogin=!!+t.is_login,_.userInfo=s(_.userInfo,t.userinfo),w(this.onUpdateData)&&this.onUpdateData(_.userInfo))}},{key:"render",value:function(){var t=this,e=this.root||document.createElement("div");e.classList.add("xcp-list");var n=this.list||document.createElement("div");n.classList.add("".concat("xcp-list","-list")),this.isSecond?n.classList.add("is-second"):e.insertAdjacentHTML("afterbegin",this.changeTitle()),this.listData.map((function(e){var i=document.createElement("div");new nn({container:i,appid:t.appid,data:e,isSecond:t.isSecond,onDeleteSuccess:function(e){return t.deleteItem(e)},unshiftReply:function(e){return t.unshiftItem(e)},syncTextComment:function(e){return t.syncTextComment(e)},actionCallback:t.actionCallback}),n.appendChild(i)})),!this.list&&e.appendChild(n),e.insertAdjacentHTML("beforeend",this.changeLoaderStatus({isLoading:!1,isError:!1,hasMore:this.allData&&!+this.allData.is_over})),!this.root&&this.container.insertAdjacentElement("beforeend",e),this.root=e,this.list=n}},{key:"makeTplTitle",value:function(t){var e=t;void 0===e&&(e=this.allData&&+this.allData.comment_count),this.actionCallback("xcp-cmtcount-change",{count:e});var n="评论列表";return e>0&&(n+="（".concat(e,"条）")),'<h2 class="'.concat("xcp-list",'-title">').concat(n,"</h2>")}},{key:"changeTitle",value:function(t){var e=this.container.querySelector(".".concat("xcp-list","-title"));return e?(e.outerHTML=this.makeTplTitle(t),""):this.makeTplTitle(t)}},{key:"makeTplLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.loaderStatus=s(this.loaderStatus,t),n="",i="",o="";return this.isSecond?(i+="is-second",e.isClosed&&this.replyCount<=2?n="":e.isClosed&&this.replyCount>2?(n="全部".concat(this.replyCount,"条回复"),o+="icon-down"):e.hasMore?(n="查看全部回复",o+="icon-down"):(n="收起",o+="icon-up")):e.isLoading?n=L:e.isError?n=R:e.hasMore?n=N:(n=H,i+="no-more"),n?'\n            <div\n                class="'.concat("xcp-list","-loader ").concat(i,'"\n                data-parent-id="').concat(this.parentId,'"\n            >\n                <span>').concat(n,"</span>\n                ").concat(this.isSecond?'<i class="icon '.concat(o,'"></i>'):"","\n            </div>\n        "):""}},{key:"changeLoaderStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.container.querySelector(".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'));return e?(e.outerHTML=this.makeTplLoader(t),""):this.makeTplLoader(t)}},{key:"closeList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=this.container.querySelector(".".concat("xcp-list","-list"));e.children.length>t;)e.removeChild(e.lastElementChild);this.queryConf.start=0,this.changeLoaderStatus({isClosed:!0,hasMore:!0})}},{key:"bindEvent",value:function(){var t=this;ht(this.container,".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'),"click",(function(e){!t.isSecond||t.loaderStatus.hasMore?!t.loaderStatus.isLoading&&t.loaderStatus.hasMore&&(t.loaderStatus.isError||(t.queryConf.start+=t.isSecond&&t.loaderStatus.isClosed?0:t.queryConf.num),t.actionCallback("xcp-loader-click",{isSecond:t.isSecond}),t.fetchData()):t.closeList()}))}},{key:"changeCommentCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isSecond)on.emit("changeCommentCount",t);else{var e,n=t.count,i=t.type;e="number"==typeof n?this.allData.comment_count=n:"--"===i?--this.allData.comment_count:++this.allData.comment_count,_.commentCount=e,this.changeTitle(e)}}},{key:"afterDeleteItem",value:function(t){this.changeCommentCount(this.isSecond?{type:"--"}:{count:+this.allData.comment_count-1-t}),this.isSecond&&(this.replyCount--,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"deleteItem",value:function(t){this.list&&(this.list.removeChild(t.target),this.afterDeleteItem(t.replyCount),this.isSecond||this.list.children.length||!this.root||(this.root.outerHTML="",this.root=null,this.list=null))}},{key:"afterUnshiftItem",value:function(){this.changeCommentCount({type:"++"}),this.isSecond&&(this.replyCount++,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"unshiftItem",value:function(t){var e=this;if(!this.isSecond&&!this.list)return this.listData=[t],_.commentCount=this.allData.comment_count=1,void this.render();var n=document.createElement("div");new nn({container:n,appid:this.appid,data:t,isSecond:this.isSecond,onDeleteSuccess:function(t){return e.deleteItem(t)},actionCallback:this.actionCallback}),this.list.insertAdjacentElement("afterBegin",n),this.afterUnshiftItem()}},{key:"syncTextComment",value:function(t){this.isSecond?on.emit("syncTextComment",t):this.unshiftItem(t)}}]),t}();!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".xcp-publish{padding-bottom:20px}.xcp-publish-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-publish-main{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:20px}.xcp-publish-main .left{padding-top:23px;width:64px}.xcp-publish-main .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}");var rn="xcp-publish",cn=function(){function t(e){o(this,t),this.container=e.container,this.isEmojFloatUp=e.isEmojFloatUp,this.avatarSrc=_.userInfo&&_.userInfo.avatar,this.onPublishSuccess=e.onPublishSuccess,this.actionCallback=w(e.actionCallback)?e.actionCallback:function(){},this.render()}return r(t,[{key:"render",value:function(){var t=this,e=document.createElement("div");e.classList.add(rn);var n=document.createElement("div");n.classList.add("".concat(rn,"-main"));var i=document.createElement("div");i.classList.add("left"),this.avatar=new vt({container:i,src:this.avatarSrc});var o=document.createElement("div"),a="".concat(rn,"-main-right_").concat(Date.now());o.id=a,o.classList.add("right"),n.insertAdjacentElement("beforeEnd",i),n.insertAdjacentElement("beforeEnd",o),e.insertAdjacentHTML("afterBegin",'<h2 class="'.concat(rn,'-title">发表评论</h2>')),e.insertAdjacentElement("beforeEnd",n),this.container.insertAdjacentElement("afterBegin",e),this.publish=Xe({containerId:a,isEmojFloatUp:this.isEmojFloatUp,radio:{label:""},sendCallback:function(e){delete e.isRadioChecked,e&&e.text&&Te().then((function(){t.actionCallback("xpc-login-succ",{userName:_.curUserName,location:"publish"}),we(e).then((function(e){_.hideToast?t.actionCallback("xcp-publish-succ","发表成功"):Ze.show({text:"发表成功"}),w(t.onPublishSuccess)&&t.onPublishSuccess(e),t.publish.clearTextarea()})).catch((function(e){_.hideToast?t.actionCallback("xcp-publish-error",e):Ze.show({text:e})}))})).catch((function(){}))},actionCallback:this.actionCallback})}},{key:"updateData",value:function(t){this.avatarSrc=t.avatar,this.avatar.updateSrc({src:this.avatarSrc})}},{key:"checkRealShow",value:function(t){this.publish.checkRealShow(t)}}]),t}(),sn="object"===("undefined"==typeof window?"undefined":i(window))?window:t,ln=function(t){if("function"==typeof t){var e="_xfunc_".concat(kt());return sn[e]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(sn,n)},e}return t},dn=encodeURIComponent,un=function(t){return dn(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))};function pn(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(He(t))return t;var n=[];for(var i in t){var o=t[i];ze(o)?o=JSON.stringify(hn(o)):Pe(o)?o="":Re(o)?o=JSON.stringify(o):Ne(o)&&(o=ln(o)),n.push("".concat(i,"=").concat(e?un(o):o))}return n.join("&")}function hn(t){return t.map((function(t){switch(Ie(t)){case"string":return t;case"function":return ln(t);default:return t}}))}var fn=decodeURIComponent,mn=new RegExp("%[a-f0-9]{2}","gi"),gn=new RegExp("(%[a-f0-9]{2})+","gi");function xn(t,e){try{return fn(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],xn(n),xn(i))}function bn(t){try{return fn(t)}catch(o){for(var e=t.match(mn),n=1;n<e.length;n++)e=(t=xn(e,n).join("")).match(mn);return t}}var vn=function(t){if("string"!=typeof t)throw Fe("encodedURI","string",t);try{return t=t.replace(/\+/g," "),fn(t)}catch(n){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=gn.exec(t);n;){try{e[n[0]]=fn(n[0])}catch(t){var i=bn(n[0]);i!==n[0]&&(e[n[0]]=i)}n=gn.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var r=o[a];t=t.replace(new RegExp(r,"g"),e[r])}return t}(t)}},yn=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.split("?"),i=n[1]?n[1]:n[0],o=i.split("&"),a={};return o.forEach((function(t){if((t=t.split("="))[0].length>0){var n="";try{n=(e?vn(t[1]):decodeURIComponent(t[1]))||""}catch(t){}a[t[0]]=n}})),a},En=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.split("?"),i=g(n,2),o=i[0],a=i[1],r=void 0===a?"":a;return{url:o,query:e?yn(r):r}};function Bn(t,e){for(var n in e)Re(e[n])||ze(e[n])?(Re(e[n])&&!Re(t[n])&&(t[n]={}),ze(e[n])&&!ze(t[n])&&(t[n]=[]),Bn(t[n],e[n])):Le(e[n])||(t[n]=e[n])}function kn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Me(t)&&(t=n.shift()),n.forEach((function(e){Bn(t,e)})),t}var wn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=En(e);if(0===(e=i.url).indexOf("//")){var a=location.protocol;"http:"!==a&&(a="https:"),e=a+e}this.url=e;var r=n.globalData||{};this._default=s(i.query||{},r),this._data={},this._before=n.before}return r(t,[{key:"setGlobalData",value:function(t){return Re(t)&&kn(this._default,t),this}},{key:"mark",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Re(t))throw Fe("data","object",t);return Re(t)&&s(this._mdata,t),this}},{key:"_send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Re(t))throw Fe("data","object",t);var n=new Image(1,1),i="_xbox_mt_".concat(kt());window[i]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,window[i]=n=null},t=kn({},this._default,t);var o=this._before;if(!e&&Ne(o)){var a=o(t);if(!1===a)return this;Le(a)||(Re(a)||He(a))&&(t=a)}var r="".concat(this.url,"?").concat(He(t)?t:pn(t,!0));return n.src=r+"&_rnd="+kt(),this}},{key:"send",value:function(t){return this._send(this._data,t),delete this._mdata,this._mdata={},this}},{key:"report",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(!Re(t))throw Fe("data","object",t);return this._send(t,e)}}]),t}(),Dn="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"",Cn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;"main"===t&&(t="");var n=/ (baiduboxapp|biduboxapp)\//i;if(!1===n.test(e))return!1;var i=e.match(n),o=i[1];return!!~e.indexOf("".concat(t," ").concat(o))},An=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;"main"===t&&(t="");var n=/\bbdapp\/\d+\.\d+\s+\((\w+);\s*(\w+)\)/;if(""===t){var i=/\s(lite|pro|info|mission)\sbaiduboxapp\//.exec(e);if(i)return!0;if(/\bbdapp\/\d+\.\d+\s/.test(e))return!0}else if(!1===t){var o=e.match(n);if(o&&o[1])return!0}else{if(new RegExp(new RegExp("\\s".concat(t,"\\sbaiduboxapp/"))).test(e))return!0;var a=e.match(n);if(a&&a[1]&&a[1]===t)return!0}return!1},Sn="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"";function jn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;"main"===t&&(t="");var n,o="0";return"object"===("undefined"==typeof window?"undefined":i(window))&&window.baiduboxapp_version?baiduboxapp_version:((Cn(t,e)||An(t,e))&&((n=/(baiduboxapp|baiduboxvision)\/([\d.]+)/.exec(e))?o=n[2]:(n=/([\d+.]+)_(?:diordna|enohpi)_/.exec(e))&&(o=(n=n[1].split(".")).reverse().join("."))),o)}function Tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn;if((t=t||jn(e,n))&&"string"==typeof t){var i=/\d+\.\d+/.exec(t);if(i)return i[0]}return 0}var In=yn(location.search),_n=navigator.userAgent,Fn=function(t){u(n,t);var e=f(n);function n(t){o(this,n);var i={};return In.uid&&In.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach((function(t){In[t]&&(i[t]=In[t])})),e.call(this,t?"https://mbd.baidu.com/ztbox":"https://mbd.baidu.com/tcbox",{globalData:d(d({},i),{},{service:"bdbox",action:t||"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:Cn("lite")?10001:Cn("info")?10002:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{boxV:Tn(),ref:In.ref||"",gmv:In.vmgdb||"",source:In.from||In.ref||"",boxVersion:jn(),boxPlatform:_n.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}})})}return r(n,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=g(t,2),i=e[0],o=e[1],a=Re(o)?o:{};return a.data={},a.data.cateid=i,m(p(n.prototype),"setGlobalData",this).call(this,a)}},{key:"pv",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=g(t,2),i=e[0],o=e[1],a={actionid:"1",actiondata:{url:i||location.href}};return o&&(a.actiondata.u=o),m(p(n.prototype),"report",this).call(this,{data:a})}},{key:"event",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=g(t,4),i=e[0],o=e[1],a=void 0===o?"":o,r=e[2],c=void 0===r?"":r,s=e[3];if(!i)throw"monitor.tc.event need a evtName";var l={};if(Re(a)&&!c)for(var d in l={evtName:i},a)l[d]=a[d];else l={evtName:i,evtType:a,evtTag:c};var u={actionid:"2",actiondata:l};return s&&(u.cateid=s),m(p(n.prototype),"report",this).call(this,{data:u})}},{key:"newEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=g(t,2),i=e[0],o=e[1],a={actionid:"2",actiondata:i};return o&&(a.cateid=o),m(p(n.prototype),"report",this).call(this,{data:a})}}]),n}(wn),On=new Fn,Pn="visible"===(document.visibilityState||document.webkitVisibilityState),Ln=function(t){Pn?requestAnimationFrame(t):setTimeout(t,15)},Rn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return On[t].apply(On,n)},Nn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=this&&this!==window?this:On;if("complete"!==document.readyState){var a=function e(){Ln((function(){o[t].apply(o,n)})),window.removeEventListener("load",e)};window.addEventListener("load",a)}else Ln((function(){o[t].apply(o,n)}))};function Hn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return/(Android);?[\s/]+([\d.]+)?/.test(t)}function zn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return/(iPhone|iPod|iPad)/.test(t)}var Mn=jn()||"",Un=Mn.split(".").slice(0,2).join(".")||"",Kn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return zn(t)?"ios":Hn(t)?"android":"unknown"}()||"",qn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.id,o=t.flow,a=void 0===o?"":o,r=t.action;delete t.action,delete t.id,delete t.flow;var c=e.from,l=void 0===c?"":c,d=e.page,u=void 0===d?"":d,p=e.source,h=void 0===p?"":p,f=e.ext,m=void 0===f?{}:f,g=e.logId,x=void 0===g?"11414":g;m=t.ext?s({},m,t.ext):m,delete t.ext;var b={id:i||x,type:0,content:s({boxVersion:Mn,boxV:Un,platform:Kn,from:l,type:"",page:u,source:h,value:"",ext:m},t)};a&&(b.flow=a),"zpblog"===r?Nn.call(new Fn("zpblog"),"newEvent",[b,99]):n?Nn("newEvent",[b,99]):Rn("newEvent",[b,99])},$n={},Vn=1,Wn=Date.now(),Jn=!1,Yn=function(t){var e=t||{},n=e.source,i=e.nid,o=e.tid,a=e.isLogin;$n={from:"comment",page:"comment_module",source:n,value:+a,ext:{nid:""+i,topicid:""+o,num:_.commentCount}}},Qn=function(t,e){Ye(e,340,_.winHeight)&&("hide"===t?qn(d(d({},$n),{},{type:"comment_duration",ext:{time:String(Date.now()-Wn)},value:_.isLogin})):("show"===t&&(Vn++,Wn=Date.now(),Jn=!1),!Jn&&qn(d(d({},$n),{},{type:"comment_show",ext:{count:Vn},value:_.isLogin?+_.isLogin:$n.value})),Jn=!0))},Gn=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};switch(t){case"publish-emoj-show":e="emoji_button_show";break;case"publish-radio-show":e=n.checked?"forward_show_1":"forward_show_0";break;case"publish-emoj-click":e="emoji_button_clk";break;case"publish-radio-click":e=n.checked?"forward_success":"forward_cancel";break;case"publish-send-click":e="publish_button";break;case"publish-textarea-click":e="input_box_clk";break;case"publish-emojItem-click":e="emoji_id_clk",i={id:n.id};break;case"publish-textarea-draft":e="publish_comment_draft";break;case"xcp-user-click":e="user_name_clk";break;case"xcp-like-click":e=n.liked?"praise_clk":"praise_cancel_clk ";break;case"xcp-delete-click":e="delete_clk";break;case"xcp-reply-click":e="reply_clk";break;case"xcp-report-click":e="report_clk";break;case"xcp-loader-click":e=n.isSecond?"view_replyall_clk":"view_all_clk"}e&&qn(d(d({},$n),{},{type:e,ext:i,value:_.isLogin?+_.isLogin:$n.value}))};!function(t){var e=window.Element.prototype;"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)++n;return Boolean(e[n])}),"function"!=typeof e.closest&&(e.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null})}();var Xn=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.options=d({source:"xbox-comment-pc",isNeedPublish:!0,openBrowserLimit:!0},n),this.container=document.getElementById(this.options.containerId);var i=this.options.tid;if(this.options.openBrowserLimit&&!_.isHigherBrowser||!i)this.container&&(this.container.style.display="none");else{var a=this.options,r=a.appid,c=a.source,s=a.isNeedPublish,l=a.staticPage,u=a.actionCallback,p=a.hideToast,h=void 0!==p&&p;this.appid=_.appid=r||"22862035",this.threadId=_.threadId=i,this.source=c,this.isNeedPublish=s,this.actionCallback=w(u)?u:function(){},_.passStaticPage=l,_.hideToast=h,Yn(this.options),this.render(),setTimeout((function(){Qn("first",e.container)}),100),this.bindEvent()}}return r(t,[{key:"render",value:function(){var t=this;if(this.isNeedPublish){var e=document.createElement("div");this.container.appendChild(e),this.publish=new cn({container:e,isEmojFloatUp:this.options.isEmojFloatUp,onPublishSuccess:function(e){t.list.unshiftItem(e)},actionCallback:function(e,n){Gn(e,n),t.actionCallback(e,n)}})}var n=document.createElement("div");this.list=new an({container:n,appid:this.appid,threadId:this.threadId,source:this.source,onUpdateData:function(e){t.publish&&t.publish.updateData(e)},actionCallback:function(e,n){Gn(e,n),t.actionCallback(e,n)}}),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var t=this,e=!1;w(this.publish.checkRealShow)&&this.publish.checkRealShow,window.addEventListener("scroll",(function(){Qn("scroll",t.container),e||w(t.publish.checkRealShow)&&t.publish.checkRealShow((function(){e=!0}))}),!1),function(t){var e=t.showCb,n=t.hiddenCb;e=e||t.show,n=n||t.hidden||t.hide;var i="",o="";void 0!==document.visibilityState?(i="visibilityState",o="visibilitychange"):void 0!==document.webkitVisibilityState&&(i="webkitVisibilityState",o="webkitvisibilitychange"),o&&document.addEventListener(o,(function(){"visible"===document[i]?e&&e():n&&n()}),!1)}({showCb:function(){Qn("show",t.container),e=!1,w(t.publish.checkRealShow)&&t.publish.checkRealShow()},hiddenCb:function(){Qn("hide",t.container)}})}}]),t}();e.CommentPc=Xn,e.default=function(t){return new Xn(t)},Object.defineProperty(e,"__esModule",{value:!0})}(e,n("015f"))}).call(this,n("6109"))}}]);
//# sourceMappingURL=1.43441e28.js.map