!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).biliMirror={})}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;let n=!1;function r(){return!1===n&&(n="undefined"!=typeof window),n}var o;const i=function(){if(r())return window}();function s(){if(r())return i.__biliMirror__=i.__biliMirror__||{},i.__biliMirror__}const a=r()&&(null===(o=document.getElementsByTagName("meta").spm_prefix)||void 0===o?void 0:o.content)||"0.0";function c(e,t,n,r=!1){e.addEventListener(t,n,r)}function l(){return Date.now()}const u=Object.prototype.toString;function d(e){return function(t){return u.call(t)===`[object ${e}]`}}const f={isNumber:d("Number"),isString:d("String"),isBoolean:d("Boolean"),isNull:d("Null"),isUndefined:d("Undefined"),isSymbol:d("Symbol"),isFunction:d("Function"),isObject:d("Object"),isArray:d("Array"),isProcess:d("process"),isWindow:d("Window")};function p(e){const t=/^[0-9a-zA-Z_-]+$/.test(e);return t||console.warn(`字符串:${e},不符合条件,任意数字,字母、下划线、中划线组成`),t}const h=(e,t=["chrome-extension"],n=!1)=>{if(0===t.length)return!1;if(null==(null==e?void 0:e.message))return!0;const[r]=e.message.split("?");if(r.includes(location.hostname))return!0;const o=(null==e?void 0:e.fileName)||"";return!(!n||o.endsWith(".js"))||t.map((e=>new RegExp(String.raw`${e}`))).some((e=>e.test(r)||e.test(o)))},m=(e=[])=>{if(0===e.length)return!1;try{return e.some((e=>new RegExp(String.raw`${e}`).test(navigator.userAgent)))}catch(e){return!1}};function g(e){if("0"===e)return 0;if(f.isNumber(e))return e>10?10:e<=0?1:e;if(f.isString(e)&&!isNaN(e)){const t=parseInt(e);return t>10?10:t<=0?1:t}return console.warn("mirror-kv-[config] sampling rate error,pleace set 1-10"),1}function v(e){return Math.floor(10*Math.random()+1)>e}function y(){return"undefined"==typeof document||null==document.location?"":document.location.href}function b(e){if(!e)return{};const t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function E(e,t,n,r=!1){if(void 0!==e&&(t in e||r)){const r=n(e[t]);"function"==typeof r&&(e[t]=r)}}const w=(e,t)=>{let n=!0;return function(...r){n&&(e.apply(this,r),n=!1,setTimeout((()=>{n=!0}),t))}},R=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout((()=>{e.apply(this,r)}),t)}};function O(e){return e&&"object"==typeof e&&!Array.isArray(e)}function S(e,t){let n=Object.assign({},e);return O(e)&&O(t)&&Object.keys(t).forEach((r=>{O(t[r])?r in e?n[r]=S(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}var _="1.6.10";const I="@bilibili/bili-mirror",T=_;var P=function(e){"undefined"!=typeof window&&window.__BILI_X_ENGINE_SCRIPT_CACHE__&&void 0!==window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]&&delete window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]},N=function(e,t){if("undefined"==typeof window)return Promise.reject(new Error("window is not defined"));var n,r=e=e.replace(/^https?:\/\//,"//"),o=(n=r,"undefined"==typeof window?null:window.__BILI_X_ENGINE_SCRIPT_CACHE__&&window.__BILI_X_ENGINE_SCRIPT_CACHE__[n]||null);if(null!=o&&o.promise)return o.promise;var i=new Promise((function(n,r){var o=document.createElement("script");o.src=e,null!=t&&t.behavior&&o.setAttribute(t.behavior,""),o.onload=function(){var o=window;if(t.lib)return o[t.lib]?n(o[t.lib]):r(new Error('Failed to access library "'+t.lib+'" from '+e));n(null)},o.onerror=function(){r(new Error("Failed to load "+e))},document.head.appendChild(o)}));return function(e,t){"undefined"!=typeof window&&(window.__BILI_X_ENGINE_SCRIPT_CACHE__||(window.__BILI_X_ENGINE_SCRIPT_CACHE__={}),window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]=t)}(r,{promise:i,lib:null==t?void 0:t.lib}),i.then((function(){!1===(null==t?void 0:t.cache)&&P(r)})).catch((function(){!1===(null==t?void 0:t.cache)&&P(r)})),i},C=function(e){return Promise.resolve(function(){try{return window.KvSDK?Promise.resolve(window.KvSDK):Promise.resolve(N("//s1.hdslb.com/bfs/seed/jinkela/kv-sdk/index.js",{lib:"KvSDK"}))}catch(e){return Promise.reject(e)}}()).then((function(t){return new t(e)}))},L=function(e){return Promise.resolve(function(){try{return window.ReporterPb?Promise.resolve(window.ReporterPb):Promise.resolve(N("//s1.hdslb.com/bfs/seed/jinkela/short/reporter-pb/index.js",{lib:"ReporterPb"}))}catch(e){return Promise.reject(e)}}()).then((function(t){return new t(e)}))};const j=s(),A={SPMID:"333.1333",GROUP:"bilimirror",KEY:"whitelist",KEYTOP:"toplist"};class k{constructor(){this.origin="bili",this.module="common",this.config={},this.kvOptions={},this._defaultKvConfig={retry:[],performance:1,poll:5,techpv:5,userLog:[],resourceTime:{},userLogDeep:10,track:{},filterEndJs:!1}}fetchWhiteListConfig(e,t,n=!1){return new Promise(((r,o)=>{e.get(t).then((t=>{if(!t)return n||console.warn(`${e.storage.appKey}-没有对应配置,返回默认配置`),void r(n?this._defaultKvConfig:{});const o=JSON.parse(t);r(o)})).catch((t=>{console.warn(`${e.storage.appKey},mirror获取白名单配置失败,返回默认配置`),r(this._defaultKvConfig)}))}))}getConfig(){return t(this,void 0,void 0,(function*(){this._defaultConfigSDK=yield C(Object.assign({appKey:A.SPMID,strict:1,reporter:{ignoreAppKeyNotFound:!0}},this.kvOptions));const{SPMID:e,GROUP:t,KEY:n,KEYTOP:r}=A,o=this.spmId||a,i=yield this.fetchWhiteListConfig(this._defaultConfigSDK,`${t}.${n}`,!0),s=yield this.fetchWhiteListConfig(this._defaultConfigSDK,`${t}.${r}`,!0);let c={};e!==o&&(this._configSDK&&delete this._configSDK,this._configSDK=yield C(Object.assign({appKey:o,strict:1,reporter:{ignoreAppKeyNotFound:!0}},this.kvOptions)),c=yield this.fetchWhiteListConfig(this._configSDK,`${t}.${n}`));let l=S(i,c);return l=S(l,s),new Promise((e=>{this.config.white=(null==l?void 0:l.white)||{},this.config["white-retry"]=(null==l?void 0:l.retry)||[],this.config["white-preformance-rate"]=l.performance?g(null==l?void 0:l.performance):1,this.config["poll-time"]=l.poll?g(null==l?void 0:l.poll):5,this.config["tech-pv"]=l.techpv?g(null==l?void 0:l.techpv):5,this.config["user-log"]=(null==l?void 0:l.userLog)||[],this.config["resource-time"]=(null==l?void 0:l.resourceTime)||{},this.config["user-log-deep"]=(null==l?void 0:l.userLogDeep)||10,this.config.track=(null==l?void 0:l.track)||{},this.config["filter-end-js"]=(null==l?void 0:l.filterEndjs)||!1,this.config["player-log-umd"]=(null==l?void 0:l.playLogUmd)||"",e()}))}))}bindOptions(e={}){return t(this,void 0,void 0,(function*(){return j.mirrorVersion=T,Object.keys(e).forEach((t=>{"config"!==t&&("module"===t&&"function"==typeof e[t]?this[t]=e[t]():this[t]=e[t])})),yield this.getConfig(),Promise.resolve("ok")}))}updateModule(e){this.module=e}}function x(){return j.options||(j.options=new k)}const $=r()?x():null;function D(e={}){return t(this,void 0,void 0,(function*(){if(r()){return yield $.bindOptions(e)}}))}var H,M,B,F,U=-1,K=function(e){addEventListener("pageshow",(function(t){t.persisted&&(U=t.timeStamp,e(t))}),!0)},G=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},W=function(){var e=G();return e&&e.activationStart||0},J=function(e,t){var n=G(),r="navigate";return U>=0?r="back-forward-cache":n&&(document.prerendering||W()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Y=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},q=function(e,t,n,r){var o,i;return function(s){t.value>=0&&(s||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},X=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},V=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},z=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Q=-1,Z=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ee=function(e){"hidden"===document.visibilityState&&Q>-1&&(Q="visibilitychange"===e.type?e.timeStamp:0,ne())},te=function(){addEventListener("visibilitychange",ee,!0),addEventListener("prerenderingchange",ee,!0)},ne=function(){removeEventListener("visibilitychange",ee,!0),removeEventListener("prerenderingchange",ee,!0)},re=function(){return Q<0&&(Q=Z(),te(),K((function(){setTimeout((function(){Q=Z(),te()}),0)}))),{get firstHiddenTime(){return Q}}},oe=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ie=[1800,3e3],se=function(e,t){t=t||{},oe((function(){var n,r=re(),o=J("FCP"),i=Y("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-W(),0),o.entries.push(e),n(!0)))}))}));i&&(n=q(e,o,ie,t.reportAllChanges),K((function(r){o=J("FCP"),n=q(e,o,ie,t.reportAllChanges),X((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},ae=[.1,.25],ce={passive:!0,capture:!0},le=new Date,ue=function(e,t){H||(H=t,M=e,B=new Date,pe(removeEventListener),de())},de=function(){if(M>=0&&M<B-le){var e={entryType:"first-input",name:H.type,target:H.target,cancelable:H.cancelable,startTime:H.timeStamp,processingStart:H.timeStamp+M};F.forEach((function(t){t(e)})),F=[]}},fe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){ue(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):ue(t,e)}},pe=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,fe,ce)}))},he=[100,300],me=[2500,4e3],ge={},ve=[800,1800],ye=function e(t){document.prerendering?oe((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},be=function(e,t){t=t||{};var n=J("TTFB"),r=q(e,n,ve,t.reportAllChanges);ye((function(){var o=G();if(o){var i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-W(),0),n.entries=[o],r(!0),K((function(){n=J("TTFB",0),(r=q(e,n,ve,t.reportAllChanges))(!0)}))}}))};const Ee=e=>!!r()&&(()=>{try{return r()&&PerformanceObserver?PerformanceObserver.supportedEntryTypes||[]:null}catch(e){console.error("bili-mirror: supportList 解析异常:",e)}})().includes(e);function we(e){window.performance.getEntriesByType&&window.addEventListener("load",(function(){const t=window.performance;t&&setTimeout((()=>{const n=t.getEntriesByType("navigation")[0],r={redirectTime:n.redirectEnd-n.redirectStart,dnsTime:n.domainLookupEnd-n.domainLookupStart,tcpTime:n.connectEnd-n.connectStart,sslTime:"https:"===location.protocol?n.connectEnd-n.secureConnectionStart:0,ttfbTime:n.responseStart-n.startTime,requestDoneTime:n.responseEnd-n.responseStart,domParseTime:n.domContentLoadedEventEnd-n.responseEnd,resourceDownloadTime:n.loadEventEnd-n.domContentLoadedEventEnd,pageTime:n.duration};e({name:"PAGETIME",data:r,value:1})}),0)}))}function Re(e){/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?(!function(e){if(!Ee("first-input"))return;const t=new PerformanceObserver((n=>{for(const r of n.getEntries()){t.disconnect();const n=r.processingStart-r.startTime;e({name:"FID",value:n,rating:n<100?"good":n>100&&n<300?"normal":"poor"})}}));t.observe({type:"first-input",buffered:!0})}((t=>{e(t)})),function(e){if(!Ee("paint"))return;const t=new PerformanceObserver((n=>{for(const r of n.getEntries())"first-contentful-paint"===r.name&&(t.disconnect(),e({name:"FCP",value:r.startTime,rating:r.startTime<1600?"good":r.startTime>1600&&r.startTime<3e3?"normal":"poor"}))}));t.observe({type:"paint",buffered:!0})}((t=>{e(t)})),function(e){if(!Ee("largest-contentful-paint"))return;const t=new PerformanceObserver((n=>{for(const r of n.getEntries())t.disconnect(),e({name:"LCP",value:r.startTime,rating:r.startTime<1600?"good":r.startTime>1600&&r.startTime<3e3?"normal":"poor"})}));t.observe({type:"largest-contentful-paint",buffered:!0})}((t=>{e(t)})),function(e){window.addEventListener("load",(function(){let{responseStart:t,navigationStart:n}=window.performance.timing,r=t-n;e({name:"TTFB",value:r,rating:r<200?"good":r>200&&r<500?"normal":"poor"})}))}((t=>{e(t)})),we((t=>{e(t)}))):(!function(e,t){t=t||{},oe((function(){var n,r=re(),o=J("LCP"),i=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-W(),0),o.entries=[t],n())},s=Y("largest-contentful-paint",i);if(s){n=q(e,o,me,t.reportAllChanges);var a=z((function(){ge[o.id]||(i(s.takeRecords()),s.disconnect(),ge[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,a,!0)})),V(a),K((function(r){o=J("LCP"),n=q(e,o,me,t.reportAllChanges),X((function(){o.value=performance.now()-r.timeStamp,ge[o.id]=!0,n(!0)}))}))}}))}((t=>{e(t)})),function(e,t){t=t||{},oe((function(){var n,r=re(),o=J("FID"),i=function(e){e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},s=function(e){e.forEach(i)},a=Y("first-input",s);n=q(e,o,he,t.reportAllChanges),a&&V(z((function(){s(a.takeRecords()),a.disconnect()}))),a&&K((function(){var r;o=J("FID"),n=q(e,o,he,t.reportAllChanges),F=[],M=-1,H=null,pe(addEventListener),r=i,F.push(r),de()}))}))}((t=>{e(t)})),function(e,t){t=t||{},se(z((function(){var n,r=J("CLS",0),o=0,i=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e])}})),o>r.value&&(r.value=o,r.entries=i,n())},a=Y("layout-shift",s);a&&(n=q(e,r,ae,t.reportAllChanges),V((function(){s(a.takeRecords()),n(!0)})),K((function(){o=0,r=J("CLS",0),n=q(e,r,ae,t.reportAllChanges),X((function(){return n()}))})),setTimeout(n,0))})))}((t=>{e(t)})),se((t=>{e(t)})),be((t=>{e(t)})),we((t=>{e(t)})))}const Oe="MIRROR_TRACK",Se="log",_e="key",Ie={createIndexedDB:()=>new Promise(((e,t)=>{const n=indexedDB.open(Oe,1);n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(Se)||t.createObjectStore(Se,{keyPath:_e})},n.onsuccess=()=>{event.target.result.close(),e()},n.onerror=()=>{console.log("Indexed Start Error"),t()}})),add(e){const t=function(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`}()+"_"+Math.ceil(999*Math.random())+"Z",n=indexedDB.open(Oe,1);n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(Se)||t.createObjectStore(Se,{keyPath:_e})},n.onsuccess=n=>{const r=n.target.result;if(!r.objectStoreNames.contains(Se))return;const o=r.transaction(Se,"readwrite").objectStore(Se),i=o.count();i.onsuccess=()=>{o.put({[_e]:`[${t}]-${e}`}),Number(i.result)<=1e5||(o.openCursor().onsuccess=e=>{const t=e.target.result;t&&t.delete()})},i.onerror=()=>{console.log("mirror indexDb count error")},r.close()},n.onerror=()=>{console.log("add Indexed Open Error")}},getAll:(e=!0)=>new Promise(((t,n)=>{let r=[];const o=indexedDB.open(Oe);o.onsuccess=o=>{const i=o.target.result;if(!i.objectStoreNames.contains(Se))return void n("the store log not exists in the MIRROR_TRACK databse");const s=i.transaction(Se,"readonly").objectStore(Se);if(e)s.openCursor().onsuccess=e=>{const n=e.target.result;if(n)r.push(n.key),r.push("\r\n"),n.continue();else{const e=new Blob(r,{type:"text/plain;charset=utf-8"});t(e)}},s.openCursor().onerror=()=>{n("OpenCursor Error")};else{s.getAll().onsuccess=function(e){const n=e.target.result;t(n)}}i.close()},o.onerror=()=>{n("Indexed Open Error")}})),clearStore(){const e=indexedDB.open(Oe);e.onsuccess=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(Se))return void console.log(`Object store ${Se} does not exist`);t.transaction(Se,"readwrite").objectStore(Se).clear().onsuccess=function(e){console.log("All entries have been removed from the store.")},t.close()},e.onerror=function(e){console.log("Error opening db",e.target.error)}},deleteIndexedDB(){const e=indexedDB.deleteDatabase(Oe);e.onsuccess=()=>{console.log("Delete Success"),Ie.createIndexedDB()},e.onerror=()=>{console.log("Delete Error")}}};var Te,Pe,Ne,Ce,Le,je,Ae;!function(e){e.INIT="init",e.ERROR="error",e.UNHANDLEDREJECTION="unhandledrejection",e.RESOURCE="resource",e.PERFORMANCE="performance",e.WHITESCREEN="whiteScreen",e.BREABCRUMB="breadcrumb"}(Te||(Te={})),function(e){e.ERROR="error",e.CLICK="click",e.HISTORY="history",e.HASHCHANGE="hashchange",e.UNHANDLEDREJECTION="unhandledrejection",e.RESOURCE="resource",e.WHITE="white",e.CUSTOM="custom",e.SCROLL="scroll",e.API="api"}(Pe||(Pe={})),function(e){e.BEFORE="mirrorHandlerBefore",e.AFTER="mirrorHandlerAfter"}(Ne||(Ne={})),function(e){e.ERROR="error",e.OK="ok"}(Ce||(Ce={})),function(e){e.AUTO="auto",e.DEFAULT="default"}(Le||(Le={})),function(e){e.HISTORY="history",e.HASH="hash",e.DOM="dom",e.JS="js",e.PROMISE="promise",e.RESOURCE="resource",e.WHITE="white",e.SCROLL="scroll",e.API="api"}(je||(je={})),function(e){e.LOAD="info-load",e.REFRESH="info-refresh",e.PAGETABSTATUS="info-visibilitychange",e.DEVICE="info-device",e.SCROLL="info-scroll",e.PAGECLOSE="info-close",e.CLICK="info-click",e.HISTORY="info-history",e.HASHCHANGE="info-hashchange",e.APIUNKNOWN="info-request-unknown",e.APISUCCESS="success-request",e.APIERROR="error-request",e.ERROR="error-js",e.UNHANDLEDREJECTION="error-unhandledrejection",e.RESOURCE="error-resource",e.WHITE="error-white"}(Ae||(Ae={}));const ke={isExclusive:1},xe={mirrorPolymer:3},$e=(e,n="before",r)=>{const o=[];let i=!1,s=0;return{start(){return new Promise((a=>t(this,void 0,void 0,(function*(){if(!i){for(i=!0;s<e.length;){const t=e[s];if("before"===n?o.push(yield null==t?void 0:t.mirrorHandleBefore(r.type,r.data)):o.push(yield null==t?void 0:t.mirrorHandleAfter(r.type,r.data)),s++,!i)return}i=!1,a(o)}}))))}}};class De{constructor(){this.timeID=null,this.func=null}repeat(e,t){this.func=e,this.timeID=setTimeout((()=>{e(),this.repeat(e,t)}),t)}clear(){clearTimeout(this.timeID)}}let He=null;class Me{before(e,n){return new Promise((r=>t(this,void 0,void 0,(function*(){if($.plugins&&f.isArray($.plugins))try{const t=$.plugins,o=yield $e(t,"before",{type:e,data:n}).start();let[i]=o.slice(-1);r(i)}catch(e){console.warn("bili-mirror:plugin function before hook error,please check"),r(!0)}else if($.plugins&&$.plugins.mirrorHandleBefore)try{$.plugins.mirrorHandleBefore(e,n).then((e=>{r(e)}))}catch(e){console.warn("bili-mirror:plugin function before hook error,please check"),r(!0)}else r(!0)}))))}after(e,n){return new Promise((r=>t(this,void 0,void 0,(function*(){if($.plugins&&f.isArray($.plugins))try{const t=$.plugins;yield $e(t,"after",{type:e,data:n}).start(),r()}catch(e){console.warn("bili-mirror:plugin function after hook error,please check"),r()}else if($.plugins&&$.plugins.mirrorHandleAfter)try{$.plugins.mirrorHandleAfter(e,n).then((()=>{r()}))}catch(e){console.warn("bili-mirror:plugin function after hook error,please check"),r()}else r()}))))}}He||(He=new Me);const Be=s();const Fe=r()?Be.breadcrumb||(Be.breadcrumb=new class{constructor(){this.maxBreadcrumbs=10,this.stack=[],this.isSet=!1}push(e){return t(this,void 0,void 0,(function*(){(null==$?void 0:$.config["user-log-deep"])&&!this.isSet&&(this.maxBreadcrumbs=null==$?void 0:$.config["user-log-deep"],this.isSet=!0);(yield He.before(Te.BREABCRUMB,e))&&(this.immediatePush(e),c(i,"beforeunload",(()=>{this.stack.filter((e=>"error"===e.status)).length&&(this.goToReport(this.stack),window.__biliMirrorPbInstance__&&window.__biliMirrorPbInstance__.flush&&window.__biliMirrorPbInstance__.flush())})))}))}immediatePush(e){if(e.time||(e.time=l()),this.stack.length>=this.maxBreadcrumbs){this.stack.filter((e=>"error"===e.status)).length?(this.goToReport(this.stack),this.clear()):this.clear()}this.stack.push(e),this.stack.sort(((e,t)=>e.time-t.time))}shift(){return void 0!==this.stack.shift()}clear(){this.stack=[]}getStack(){return this.stack}goToReport(e){let t={};e.forEach(((e,n)=>{t[`logStep-${n}`]=e})),Ct({type:"custom",event:`${$.origin}.${$.module}.USERLOG`,msg:Object.assign({userLogInfo:Object.assign({},t)},ke)}),He.after(Te.BREABCRUMB,this.stack),this.clear()}}):null;let Ue=null;const Ke=s();function Ge(e){const t=(null==$?void 0:$.config["user-log"])||null;return!!t&&t.find((t=>t===e))}function We(){return"log"!==(null==Ke?void 0:Ke.logType)}class Je{constructor(){}handleHistory(e){const{from:t,to:n}=e,{relative:r}=b(t),{relative:o}=b(n);We()&&it(Ae.HISTORY,"history跳转",{from:r||"/",to:o||"/"}),Ge(je.HISTORY)&&Fe.push({category:Pe.HISTORY,status:Ce.OK,time:l(),msg:{from:r||"/",to:o||"/"}})}handleHashChange(e){const{oldURL:t,newURL:n}=e,{relative:r}=b(t),{relative:o}=b(n);We()&&it(Ae.HASHCHANGE,"hashChange跳转",{from:r,to:o}),Ge(je.HASH)&&Fe.push({category:Pe.HASHCHANGE,status:Ce.OK,time:l(),msg:{from:r,to:o}})}handleDomClick(e){const t=function(e){if(e.target.offsetParent){const t=e.target.offsetParent.tagName.toLowerCase();return"body"===t||"html"===t||void 0===t?"":e.target.outerHTML}return e.target.outerHTML}(e);t&&(We()&&it(Ae.CLICK,"点击",{dom:t}),Ge(je.DOM)&&Fe.push({category:Pe.CLICK,status:Ce.OK,time:l(),msg:{clickDom:t}}))}handleScroll(){const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;We()&&it(Ae.SCROLL,"页面滚动",{top:e}),Ge(je.SCROLL)&&Fe.push({category:Pe.SCROLL,status:Ce.OK,time:l(),msg:{top:e}})}handleJsError(e){We()&&it(Ae.ERROR,"js报错",{message:e.message}),Ge(je.JS)&&Fe.push({category:Pe.ERROR,status:Ce.ERROR,time:e.time||l(),msg:{message:e.message}})}handlePromiseError(e){We()&&it(Ae.UNHANDLEDREJECTION,"rejection错误",{message:e.message}),Ge(je.PROMISE)&&Fe.push({category:Pe.UNHANDLEDREJECTION,status:Ce.ERROR,time:e.time||l(),msg:{message:e.message}})}handleResourceError(e){We()&&it(Ae.RESOURCE,"resource错误",{message:e.message,name:null==e?void 0:e.name}),Ge(je.RESOURCE)&&Fe.push({category:Pe.RESOURCE,status:Ce.ERROR,time:e.time||l(),msg:{message:e.message,name:null==e?void 0:e.name}})}handleWhiteScreen(){We()&&it(Ae.WHITE,"白屏错误",{url:location.href}),Ge(je.WHITE)&&Fe.push({category:Pe.WHITE,status:Ce.ERROR,time:l(),msg:{url:location.href}})}handleRequest(e){var t,n,r,o;We()&&it(Ye(e.httpCode),`请求httpCode:${e.httpCode}`,{api:null==e?void 0:e.api,traceId:(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t["X-Bili-Trace-Id"])||(null===(n=null==e?void 0:e.headers)||void 0===n?void 0:n["Bili-Trace-Id"])||"",code:null==e?void 0:e.code,message:null==e?void 0:e.msg}),Ge(je.API)&&Fe.push({category:Pe.API,status:Ye(e.httpCode),time:l(),msg:{api:null==e?void 0:e.api,traceId:(null===(r=null==e?void 0:e.headers)||void 0===r?void 0:r["X-Bili-Trace-Id"])||(null===(o=null==e?void 0:e.headers)||void 0===o?void 0:o["Bili-Trace-Id"])||"",code:null==e?void 0:e.code,message:null==e?void 0:e.msg}})}}function Ye(e){return e?e>=200&&e<300?Ae.APISUCCESS:Ae.APIERROR:Ae.APIUNKNOWN}Ue||(Ue=new Je);let qe=y();const Xe={historyReplace(){if(!function(){const e=i.chrome,t=e&&e.app&&e.app.runtime,n="history"in i&&!!i.history.pushState&&!!i.history.replaceState;return!t&&n}())return;const e=i.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=qe,t=String(n);qe=t,Ue.handleHistory({from:e,to:t})}return e.apply(this,t)}}i.onpopstate=function(...t){const n=y(),r=qe;qe=n,Ue.handleHistory({from:r,to:n}),e&&e.apply(this,t)},E(i.history,"pushState",t),E(i.history,"replaceState",t)},hashChangeeReplace(){var e,t;e=i,t="onhashchange",Object.prototype.hasOwnProperty.call(e,t)&&c(i,"hashchange",(function(e){Ue.handleHashChange(e)}))},domClickReplace(){if(!("document"in i))return;const e=w(Ue.handleDomClick,300);c(i.document,"click",(function(t){e(t)}),!0)},scrollReplace(){const e=R(Ue.handleScroll,1e3);c(i,"scroll",(function(t){e(t)}),!0)},jsErrorReplace(e){null==Ue||Ue.handleJsError(e)},promiseErrorReplace(e){null==Ue||Ue.handlePromiseError(e)},resourceErrorReplace(e){null==Ue||Ue.handleResourceError(e)},whiteErrorReplace(){null==Ue||Ue.handleWhiteScreen()},apiReplace(e){null==Ue||Ue.handleRequest(e)}};function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function ze(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ze=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,s=Object.create(i.prototype),a=new C(r||[]);return o(s,"_invoke",{value:I(e,n,a)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var E={};l(E,s,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(L([])));R&&R!==n&&r.call(R,s)&&(E=R);var O=b.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,s,a){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ve(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var o=f;return function(i,s){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ve(t)+" is not iterable")}return y.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(_.prototype),l(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new _(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(O),l(O,c,"Generator"),l(O,s,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}var Qe="https://s1.hdslb.com/bfs/static/dynamic-import/es-module-shims@1.9.0.js",Ze=function(e,t,n){return new Promise((function(r,o){var i=function(e){try{a(n.next(e))}catch(e){o(e)}},s=function(e){try{a(n.throw(e))}catch(e){o(e)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,s)};a((n=n.apply(e,t)).next())}))};function et(e){return new Promise((function(t,n){var r=document.createElement("script");r.onload=function(){t(window[e.name]),r.remove()},r.onerror=n,r.src=e.url,document.head.appendChild(r)}))}const tt=s(),nt="https://s1.hdslb.com/bfs/static/log-manipulator@0.2.1/index.js";function rt(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}function ot(){const e=function(){const e=null==$?void 0:$.config.track,t=rt("buvid3"),n=rt("DedeUserID");return!!e&&0!==Object.keys(e).length&&(Array.isArray(null==e?void 0:e.mid)?(null==e?void 0:e.mid.includes(n))||(null==e?void 0:e.mid.includes("*")):!!Array.isArray(null==e?void 0:e.buvid)&&((null==e?void 0:e.buvid.includes(t))||(null==e?void 0:e.buvid.includes("*"))))}(),t=function(){var e;return null===(e=null==$?void 0:$.config["user-log"])||void 0===e?void 0:e.length}();return e&&t?"all":e&&!t?"track":!e&&t?"log":"none"}function it(e,t,n){let r=`[${e}]: ${t} ${"string"==typeof n?n:JSON.stringify(n||"")}`;Ie.add(r)}function st(e,n=!1){return new Promise(((r,o)=>t(this,void 0,void 0,(function*(){const t=new FormData;t.append("log",e),t.append("project",function(){const{spmId:e,origin:t,module:n}=tt.options;return`${e||a}.${t}.${n}`}()),t.append("is_player_log",String(n));try{const e=yield fetch("https://api.bilibili.com/x/web-frontend/action-log/upload",{method:"POST",body:t,credentials:"include"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=yield e.json();r(n)}catch(e){o("Failed to upload log: "+e)}}))))}function at(e){return t(this,void 0,void 0,(function*(){try{const{getLogs:t,reportLogs:n}=yield function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ze(this,null,ze().mark((function n(){var r;return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}return n.next=3,et({name:"importShim",url:Qe});case 3:return r=n.sent,n.abrupt("return",r(e));case 5:return n.abrupt("return",import(e));case 6:case"end":return n.stop()}}),n)})))}((null==$?void 0:$.config["player-log-umd"])||nt,!0);return new Promise(((r,o)=>{const i="boolean"==typeof e?"all":e;Promise.allSettled([t(i),n(i)]).then((e=>{const[t,n]=e;"rejected"!==t.status&&"rejected"!==n.status?(t.value&&r(st(t.value,!0)),o("log not found")):o(new Error("getLogs or reportLogs failed"))}))}))}catch(e){console.error("Failed to upload play log: "+e)}}))}function ct(){return t(this,void 0,void 0,(function*(){r()&&(tt.logType=ot(),"none"!==ot()&&("log"!==tt.logType&&(yield Ie.createIndexedDB(),function(){let e=performance.getEntriesByType("navigation");if(e.length>0)if("reload"===e[0].type)it(Ae.REFRESH,"页面刷新",{url:location.href});else{it(Ae.LOAD,"页面载入",{url:location.href});const e=window.innerWidth,t=window.innerHeight;it(Ae.DEVICE,"设备信息",{ua:navigator.userAgent,window_size:`${e}*${t}`})}i.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?it(Ae.PAGETABSTATUS,"选项卡被激活"):"hidden"===document.visibilityState&&it(Ae.PAGETABSTATUS,"选项卡被隐藏")})),i.addEventListener("beforeunload",(()=>{it(Ae.PAGECLOSE,"页面关闭")}))}()),Xe.historyReplace(),Xe.hashChangeeReplace(),Xe.domClickReplace(),Xe.scrollReplace()))}))}function lt(e){return e?at(e):new Promise(((e,t)=>{Ie.getAll().then((n=>{st(n).then((t=>{e(t)})).catch((e=>{t(e)}))})).catch((e=>{t(e)}))}))}let ut=null,dt=null,ft=6e4*((null==$?void 0:$.config["poll-time"])||5);const pt="BILI_MIRROR_REPORT_POOL";(null==$?void 0:$.config["poll-time"])||setTimeout((()=>{ft=6e4*((null==$?void 0:$.config["poll-time"])||5)}),1e3);const ht=()=>{try{let e=JSON.parse(localStorage.getItem(pt)||"{}");if(!Object.keys(e).length)return;Object.entries(e).forEach((([e,t])=>{ut.tech(e,t)})),localStorage.setItem(pt,"{}")}catch(e){}},mt=()=>{dt||(dt=new De,dt.repeat(ht,ft),c(i,"beforeunload",(function(){ht(),gt()})))},gt=()=>{ut&&ut.flush&&ut.flush(),null==dt||dt.clear()},vt="_BiliGreyResult",yt=()=>{const e=bt("offline-version"),t=bt("offline-name"),n=bt("offline-plat");return e?{offlineVersion:e,offlineName:t,offlinePlat:n}:{}},bt=e=>{var t;return(null===(t=document.getElementsByTagName("meta")[e])||void 0===t?void 0:t.content)||void 0},Et=(()=>{if(!r())return{};if(!i[vt])return{};const e=i[vt];var t={};Object.entries(e).forEach((([e,n])=>{t[`${vt}_${e}`]=n}));const n=yt();return Object.assign(Object.assign({},t),n)})(),wt=[];let Rt=!1,Ot="",St=null;const _t=e=>{let t="";return t=e.diyevent?e.eventId||e.event:e.otherSpmId?`${e.otherSpmId}.${e.eventId}`:(null==$?void 0:$.spmId)?`${null==$?void 0:$.spmId}.${e.eventId}`:`${a}.${e.eventId}`,t};function It(){if(wt.length&&!Rt){Rt=!0;const[e,t,n,r]=wt.shift();if("middleWare"===t){if(St)return Rt=!1,Lt(n,r),void It();e(!0).then((e=>{var t;Rt=!1,St=e,ut!==(t=St)&&(ut=t),jt(n,r),It()}))}else e().then((()=>{Rt=!1,t&&n&&t(n,r||void 0),It()}))}}const Tt=e=>{const t=Ot?window[Ot]:window.__biliMirrorPbInstance__;e=xt(e);const n=_t(e);t[e.type](n,e.msg)},Pt=(e,t)=>{t&&Object.keys(t).length>0&&At(t),e=xt(e);const n=_t(e),r=Ot?window[Ot]:window.__biliMirrorPbInstance__,o=Object.assign(Object.assign(Object.assign({},e.msg),Et),{mirrorVersion:_,type:e.type||"custom"});r.tech(n,o)},Nt=e=>{wt.push([kt,Tt,e]),It()},Ct=(e,t)=>{wt.push([kt,Pt,e,t]),It()},Lt=(e,t)=>{var n;n=e.msg,"none"!==ot()&&Xe.apiReplace(n),!e.msg.message&&e.msg.msg&&(e.msg.message=e.msg.msg),St?jt(e,t):(wt.push([kt,"middleWare",e,t]),It())},jt=(e,t)=>{t&&void 0!==(null==t?void 0:t.isBatch)||(t=Object.assign(t||{},{isBatch:!1}));const n=((null==t?void 0:t.spmId)||a)+"."+((null==t?void 0:t.origin)||(null==$?void 0:$.origin))+"."+((null==t?void 0:t.module)||(null==$?void 0:$.module));(null==t?void 0:t.isBatch)?((e,t,n)=>{var r;const o=(null===(r=null==t?void 0:t.api)||void 0===r?void 0:r.split("?")[0])||"";try{let t=JSON.parse(localStorage.getItem(pt)||"{}");t[e]||(t[e]=Object.assign(Object.assign({},n),xe)),t[e][o]?t[e][o]++:t[e][o]=1,localStorage.setItem(pt,JSON.stringify(t))}catch(e){}mt()})(n+(t.eventId||".DATA.successReport"),e.msg,Object.assign({type:"custom",mirrorVersion:_},Et)):St.tech(n+(t.eventId||".ERROR.errorReport"),Object.assign(Object.assign({type:e.type||"custom",mirrorVersion:_},e.msg),Et))},At=(e={feature:{tech:!0}})=>{window.__biliMirrorPbInstance__.options=Object.assign({feature:{tech:!0}},e)},kt=(e=!1)=>{try{return new Promise(((t,n)=>{if(r()||n("not support in server"),e){const e={feature:{tech:!0},autoPv:!1,batch:!1};if(window.ReporterPb){const n=new window.ReporterPb(Object.assign({},e));t(n)}else L(Object.assign({},e)).then((e=>{t(e)}))}else{const e=(null==$?void 0:$.pbOtherNameIns)?null==$?void 0:$.pbOtherNameIns:"";if(f.isObject(window[e])&&Object.keys(window[e]).length)Ot=e,console.warn(`Is using ${e} to report,Please confirm open [tech] config`),t();else if(window.__biliMirrorPbInstance__)t();else{const e=S({feature:{tech:!0}},(null==$?void 0:$.pbOptions)||{});window.ReporterPb?(window.__biliMirrorPbInstance__=new window.ReporterPb(e),t()):L(Object.assign({},e)).then((e=>{window.__biliMirrorPbInstance__=e,t()}))}}}))}catch(e){console.error("bili-mirror:load pb-report-Error load failed:",e)}};function xt(e){e.event&&!e.eventId&&(e.eventId=e.event);return e.eventId.split(".").length<=1&&(e.eventId=`${null==$?void 0:$.origin}.${null==$?void 0:$.module}.${e.eventId}`),"appear"===e.type&&(e.type="exposure"),e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function $t(e,t){return e(t={exports:{}},t.exports),t.exports}var Dt=$t((function(e,t){e.exports=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],s=["args"],a=["evalOrigin"],c=r.concat(o,i,s,a);function l(e){if(e)for(var n=0;n<c.length;n++)void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}l.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof l)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new l(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},l.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),o=e.substring(t+1,n).split(","),i=e.substring(n+1);if(0===i.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),a=s[1],c=s[2],u=s[3];return new l({functionName:r,args:o||void 0,fileName:a,lineNumber:c||void 0,columnNumber:u||void 0})};for(var u=0;u<r.length;u++)l.prototype["get"+t(r[u])]=n(r[u]),l.prototype["set"+t(r[u])]=function(e){return function(t){this[e]=Boolean(t)}}(r[u]);for(var d=0;d<o.length;d++)l.prototype["get"+t(o[d])]=n(o[d]),l.prototype["set"+t(o[d])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[d]);for(var f=0;f<i.length;f++)l.prototype["get"+t(i[f])]=n(i[f]),l.prototype["set"+t(i[f])]=function(e){return function(t){this[e]=String(t)}}(i[f]);return l}()})),Ht=$t((function(e,t){var n,r,o,i;e.exports=(n=Dt,r=/(^|@)\S+:\d+/,o=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(o))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(o)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=t.match(/ (\(.+\)$)/);t=r?t.replace(r[0],""):t;var o=this.extractLocation(r?r[1]:t),i=r&&t||void 0,s=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new n({functionName:i,fileName:s,lineNumber:o[1],columnNumber:o[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(i)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new n({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(t),o=r&&r[1]?r[1]:void 0,i=this.extractLocation(e.replace(t,""));return new n({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),o=[],i=2,s=r.length;i<s;i+=2){var a=t.exec(r[i]);a&&o.push(new n({fileName:a[2],lineNumber:a[1],source:r[i]}))}return o},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),o=[],i=0,s=r.length;i<s;i+=2){var a=t.exec(r[i]);a&&o.push(new n({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[i]}))}return o},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(r)&&!e.match(/^Error created at/)}),this).map((function(e){var t,r=e.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(t=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var a=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new n({functionName:s,args:a,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e})}),this)}})}));const Mt=e=>{const t=e.target;if(null==t?void 0:t.localName){const e=function(e){return{time:l(),message:e.src||e.href||"",name:e.localName}}(t);return Object.assign(Object.assign({},e),{type:"resourceError"})}return null},Bt=[],Ft=e=>{const t=(n=(null==e?void 0:e.message)||(null==e?void 0:e.fileName),window.btoa(decodeURIComponent(encodeURIComponent(n))));var n;return Bt.some((e=>e===t))?(console.warn(`Duplicate error, not reported,${null==e?void 0:e.message}`),!1):(Bt.push(t),!0)},Ut={handleError(e){var n,r,o,s,a,c,u,d,f;return t(this,void 0,void 0,(function*(){if((null==i?void 0:i.screen.width)<=100||i.screen.height<=100)return;if((null==i?void 0:i.innerWidth)<=100||i.innerHeight<=100)return;const t=e.target;try{if(!t||e.target&&!e.target.localName){const t=(e=>{var t;const n=e.target;if(!n||e.target&&!(null===(t=e.target)||void 0===t?void 0:t.localName)){let t=Ht.parse(n?e.error:e).slice(0,5),r=[];t.forEach((e=>{let{source:t}=e;const n=t?t.split(" ").join("").split("./"):"";r.push(n)}));let o=Ht.parse(n?e.error:e)[0],{fileName:i,columnNumber:s,lineNumber:a}=o;return{type:"error",time:l(),message:e.message,fileName:i,line:a,column:s,stack:JSON.stringify(r)}}return null})(e),i=null===(r=null===(n=null==$?void 0:$.config)||void 0===n?void 0:n.white)||void 0===r?void 0:r.error,c=(null===(o=null==$?void 0:$.config)||void 0===o?void 0:o["filter-end-js"])||!1,u=h(t,i,c);if(m(null===(a=null===(s=null==$?void 0:$.config)||void 0===s?void 0:s.white)||void 0===a?void 0:a.ua))return;if(!u){if(!Ft(t))return;if(!(yield He.before(Te.ERROR,t)))return;Ct({type:"error",eventId:`${$.origin}.${$.module}.ERROR.jsError`,msg:t},$.pbOptions||{}),Xe.jsErrorReplace(t),He.after(Te.ERROR,t)}}if(null==t?void 0:t.localName){let t=Mt(e);const n=null===(u=null===(c=null==$?void 0:$.config)||void 0===c?void 0:c.white)||void 0===u?void 0:u.resource,r=h(t,n);if(m(null===(f=null===(d=null==$?void 0:$.config)||void 0===d?void 0:d.white)||void 0===f?void 0:f.ua))return;if(!r){if(!Ft(t))return;if(!(yield He.before(Te.RESOURCE,t)))return;Ct({type:"error",eventId:`${$.origin}.${$.module}.ERROR.resourceError`,msg:Object.assign(Object.assign({},t),{error_type:"AssetsError",headless:""==navigator.language?"headless":"normal",webdriver:null===navigator||void 0===navigator?void 0:navigator.webdriver})},$.pbOptions||{}),Xe.resourceErrorReplace(t),He.after(Te.RESOURCE,t)}}}catch(e){console.warn("bili-mirror: handleError-Error parsing failed:",e)}}))},handleUnhandleRejection(e){var n,r,o,s,a;return t(this,void 0,void 0,(function*(){try{if((null==i?void 0:i.screen.width)<=100||i.screen.height<=100)return;if((null==i?void 0:i.innerWidth)<=100||i.innerHeight<=100)return;const t=(e=>{let t=Ht.parse(e.reason).slice(0,5),n=[];t.forEach((e=>{let{source:t}=e;const r=t?t.split(" ").join("").split("./"):"";n.push(r)}));let r=Ht.parse(e.reason)[0],{fileName:o,columnNumber:i,lineNumber:s}=r;var a;return{type:"rejectionError",time:l(),message:(a=e.reason.message||e.reason.stack,f.isString(a)?a:f.isUndefined(a)?"undefined":JSON.stringify(a)),fileName:o,line:s,column:i,stack:JSON.stringify(n)}})(e),c=null===(r=null===(n=null==$?void 0:$.config)||void 0===n?void 0:n.white)||void 0===r?void 0:r.rejection,u=(null===(o=null==$?void 0:$.config)||void 0===o?void 0:o["filter-end-js"])||!1,d=h(t,c,u);if(m(null===(a=null===(s=null==$?void 0:$.config)||void 0===s?void 0:s.white)||void 0===a?void 0:a.ua))return;if(!d){if(!Ft(t))return;if(!(yield He.before(Te.UNHANDLEDREJECTION,t)))return;Ct({type:"error",eventId:`${$.origin}.${$.module}.ERROR.rejectionError`,msg:t},$.pbOptions||{}),Xe.promiseErrorReplace(t),He.after(Te.UNHANDLEDREJECTION,t)}}catch(e){console.warn("bili-mirror: handleUnhandleRejection-Error parsing failed:",e)}}))},handlePerformance(){return t(this,void 0,void 0,(function*(){try{if(!PerformanceObserver||!(null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes))return;if(v($.config["white-preformance-rate"]))return;Re((e=>t(this,void 0,void 0,(function*(){let{name:t,value:n}=e;if(!n||n<0)return;(yield He.before(Te.PERFORMANCE,e))&&(Ct({type:"performance",eventId:`${$.origin}.${$.module}.PERFORMANCE.${e.name}`,msg:"PAGETIME"===t?Object.assign({},null==e?void 0:e.data):Object.assign({},e)},$.pbOptions||{}),He.after(Te.PERFORMANCE,e))}))))}catch(e){console.warn("bili-mirror: performance-Error parsing failed:",e)}}))}};var Kt;!function(e){e.ERROR="error",e.OK="ok"}(Kt||(Kt={}));let Gt=!1;let Wt=null,Jt=null;const Yt="BILI_MIRROR_RESOURCE_TIME",qt=["xmlhttprequest","fetch","img","image","link","css","video","iframe","script"],Xt={API:"xmlhttprequest,fetch",IMG:"img,image",CSS:"link,css",JS:"script",VIDEO:"video",IFRAME:"iframe"};class Vt{constructor(){this._cleanUpReportPool=()=>{null==Wt||Wt.clear(),window.__biliMirrorPbInstance__&&window.__biliMirrorPbInstance__.flush&&window.__biliMirrorPbInstance__.flush()},this.config=$.config["resource-time"]||{},this.resourceWaitList=[],this.disablePush=!1}on(){PerformanceObserver&&(null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)&&(this._getAllData(),this._createObserver())}destroy(){Jt&&Jt.disconnect(),null==Wt||Wt.clear()}_getAllData(){const e=performance.getEntriesByType("resource");(e||e.length)&&e.forEach((e=>{this.resourceWaitList.push(e)}))}_handlerResourceInit(){for(this.disablePush=!0;this.resourceWaitList.length;){let e=this.resourceWaitList.shift();if(!this._isCheckResource(e))continue;const t=this._computeResourceData_(e);this._addResourceReportPool(t)}this.disablePush=!1,this._startReportInterval()}_isCheckResource(e){if(!qt.includes(e.initiatorType))return!1;if(!Object.keys(this.config).length)return!1;let t=!1;for(let n in this.config){if(Xt[n].split(",").includes(e.initiatorType)){if("*"===this.config[n]){t=!0;break}if(!this.config[n])continue;if(Array.isArray(this.config[n])&&this.config[n].length)for(let r=0;r<this.config[n].length;r++){if(e.name.split("?")[0].match(this.config[n][r])){t=!0;break}}}}return t}_computeResourceData_(e){const t=e.name.split("?"),{transferSize:n,initiatorType:r,duration:o,nextHopProtocol:i,redirectStart:s,redirectEnd:a,domainLookupEnd:c,domainLookupStart:l,connectEnd:u,connectStart:d,secureConnectionStart:f,responseStart:p,requestStart:h,responseEnd:m}=e;return{url:t[0],query:t[1],duration:o.toFixed(2),size:n,type:r,protocol:i,redirectTime:a-s,dnsTime:c-l,sslTime:u-f,tcpTime:u-d,requestTime:p-h,responseTime:m-p}}_addResourceReportPool(e){let t=JSON.parse(localStorage.getItem(Yt)||"{}");const n=e.url;t[n]||(t[n]=Object.assign({},e)),localStorage.setItem(Yt,JSON.stringify(t))}_startReportInterval(){Wt||(Wt=new De,Wt.repeat(this._clearResourceReport,18e4),c(i,"beforeunload",(()=>{this._clearResourceReport(),this._cleanUpReportPool()})))}_clearResourceReport(){try{let e=JSON.parse(localStorage.getItem(Yt)||"{}");Object.keys(e).length&&Ct({type:"performance",eventId:`${$.origin}.${$.module}.PERFORMANCE.RESOURCETIME`,msg:{resourceListInfo:Object.assign({},e)}}),localStorage.setItem(Yt,"")}catch(e){}}_createObserver(){Jt=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{this.resourceWaitList.push(e.toJSON())})),this.disablePush||this._handlerResourceInit()})),Jt.observe({entryTypes:["resource"]})}}function zt(e){if(r()){if(c(i,"error",(function(e){Ut.handleError(e)}),!0),c(i,"unhandledrejection",(function(e){Ut.handleUnhandleRejection(e)})),Ut.handlePerformance(),null==e?void 0:e.whiteScreen)try{!function(e){if(null==e?void 0:e.debug){Gt=!0;var n=document.createElement("canvas");document.body.appendChild(n);var r=n.getContext("2d");n.width=window.innerWidth,n.height=window.innerHeight,n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="9999"}if((null==i?void 0:i.screen.width)<=10||i.screen.height<=10)return;if((null==i?void 0:i.innerWidth)<=10||i.innerHeight<=10)return;const o=e.maxLoop||9,a=e.elemArry||e.checkDom||["html","body","#app"],c=e.callback||function(){},l=s();let u=0;const d=[];let f=[],p={};function h(e){return e.id?"#"+e.id:e.className&&"string"==typeof e.className?"."+e.className.split(" ").filter((e=>!!e)).join("."):e.nodeName.toLowerCase()}function m(t){const n=h(t);e.isSkeleton&&(u?f.push(n):d.push(n));let r=!1;if(!n||!a)return r;for(let e=0;e<=a.length;e++)if(a[e]&&n.match(a[e])){r=!0;break}return r}function g(){return t(this,void 0,void 0,(function*(){if(!document||!document.elementsFromPoint)return void console.warn("当前浏览器不支持elementsFromPoint方法,白屏检测跳过");if(!(yield He.before(Te.WHITESCREEN)))return;p.check_list=a;let t=!0;for(let e=1;e<=9;e++){const n=i.innerWidth*e/10,r=i.innerHeight/2,o=i.innerWidth/2,s=i.innerHeight*e/10,a=document.elementsFromPoint(n,r),c=document.elementsFromPoint(o,s),l=[];p[`pointX-${n}-${r}`]||(p[`pointX-${n}-${r}`]=[]),Gt&&v(n,r);for(let e=0;e<a.length;e++)if(l.push(h(a[e])),m(a[e])){t=!1;break}if(p[`pointX-${n}-${r}`]=l,!t)break;if(t&&5!=e){const e=[];p[`pointY-${o}-${s}`]||(p[`pointY-${o}-${s}`]=[]),Gt&&v(o,s);for(let n=0;n<c.length;n++)if(e.push(h(c[n])),m(c[n])){t=!1;break}p[`pointY-${o}-${s}`]=e}if(!t)break}if(t)y();else{if(e.isSkeleton){if(!u)return y();if(f.join()==d.join())return c({status:Kt.ERROR})}l._loopTimer&&clearTimeout(l._loopTimer),l._loopTimer=null}c({status:t?Kt.ERROR:Kt.OK,loop:u,data:Object.assign({},p)}),u>=o&&(Ct({type:"error",eventId:`${$.origin}.${$.module}.ERROR.whiteScreen`,msg:{_BiliCheckDom_Point:Object.assign({},p)}}),Xe.whiteErrorReplace()),He.after(Te.WHITESCREEN,Object.assign({},p))}))}function v(e,t){r.beginPath(),r.arc(e,t,10,0,2*Math.PI),r.fill()}function y(){u>=o&&l._loopTimer?(clearTimeout(l._loopTimer),l._loopTimer=null):l._loopTimer=setTimeout((()=>{u++,e.isSkeleton&&(f=[]),g()}),1e3)}e.isSkeleton?"complete"!=document.readyState&&g():"complete"===document.readyState?g():i.addEventListener("load",g)}(e.whiteScreen)}catch(e){console.error("bili-mirror: whiteScreen错误解析异常:",e)}$.config["resource-time"]&&Object.keys($.config["resource-time"]).length&&c(i,"load",(function(){const e=new Vt;try{e.on()}catch(t){e.destroy(),console.warn("bili-mirror:resource-watch error",t)}}))}}const Qt=(e={},t="")=>{const n=null==$?void 0:$.config["tech-pv"];if(!n)return;if(v(n))return;const r=`${$.origin}.${$.module}.TECHPV.0.0`;Ct({eventId:r,type:"custom",msg:Object.assign(Object.assign({},e),ke),otherSpmId:t||null})};var Zt;const en=s(),tn=e=>{!function(e){const t=x();null==t||t.updateModule(e)}(e)},nn=e=>{r()&&Nt(e)},rn=e=>{r()&&Ct(e)},on=e=>{r()&&At(e)},sn=(e,t)=>{r()&&Nt({type:"pv",eventId:"0.0",msg:e,otherSpmId:t||null})},an=e=>{r()&&p(e.key)&&Ct({type:"custom",eventId:e.eventId,diyevent:!0,msg:Object.assign(Object.assign({exclusiveFrom:(null==e?void 0:e.key)||""},e.msg),ke)})},cn=(e=!1)=>lt(e),ln=(e,t,n)=>{it(e,t,n)},un=()=>Ie.getAll(!1);function dn(e){r()&&(en.isInited||(en.isInited=!0,en.mirrorInitMode||(en.mirrorInitMode=Le.DEFAULT),D(e).then((()=>t(this,void 0,void 0,(function*(){yield kt();(yield He.before(Te.INIT,e))&&(zt(null==e?void 0:e.config),Qt(),ct(),He.after(Te.INIT,e),console.info("%c%s","line-height: 30px; color: #FF6699",`bili-fe-mirror:${T}`))})))).catch((e=>{console.warn(e)}))))}const fn=(e,t)=>{r()&&Lt(e,t)},pn=e=>{if(!r())return;if(!p(e.name))return;const t=`${$.origin}.${$.module}.PERFORMANCE.${e.name}`;Ct({type:"performance",eventId:t,msg:{name:e.name,value:e.value}})},hn=(e={},t="")=>{Qt(e,t)};if(r()){window.__INITIAL_MIRROR__=dn,window.__MIRROR_REPORT__={techReportPb:rn,customReportPb:nn,pbReportPv:sn,changePbOptions:on,canBatchTechReport:fn,customPerformanceQuota:pn,exclusiveBisReport:an,changeMirrorModule:tn,mirrorTechPvReport:hn,trackLogReport:cn,trackCustomLog:ln,trackGetLog:un};const e=window.__MIRROR_CONFIG__,t=null===(Zt=null==e?void 0:e.config)||void 0===Zt?void 0:Zt.isAutoInit;e&&f.isObject(e)&&t&&(!en.mirrorInitMode&&(en.mirrorInitMode=Le.AUTO),dn(e))}var mn={SDK_NAME:I,SDK_VERSION:T,init:dn,install:function(e,t={}){let n=e.config.errorHandler;e.config.errorHandler=function(e,t,r){Ut.handleError(e),n&&n.apply(null,[e,t,r]),console.error(e)},dn(t)},errorBoundary:e=>{Ut.handleError(e)}};e.canBatchTechReport=fn,e.changeMirrorModule=tn,e.changePbOptions=on,e.customPerformanceQuota=pn,e.customReport=nn,e.customReportPb=nn,e.default=mn,e.exclusiveBisReport=an,e.mirrorTechPvReport=hn,e.pbReportPv=sn,e.techReportPb=rn,e.trackCustomLog=ln,e.trackGetLog=un,e.trackLogReport=cn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=biliMirror.umd.mini.js.map
